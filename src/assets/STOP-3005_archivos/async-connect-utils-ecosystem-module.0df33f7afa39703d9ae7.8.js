try{window.performance.mark("async-connect-utils-ecosystem-module.js:eval-start")}catch(e){}(window.webpackJsonp=window.webpackJsonp||[]).push([["async-connect-utils-ecosystem-module","async-connect-utils-ecosystem-timeout-view"],{"3l72":function(e,t,n){"use strict";n.r(t);var o=n("q1tI"),i=n.n(o),r=n("J2iB"),a=n.n(r),s=n("g48e"),l=n("3tO9"),c=n.n(l),d=n("pVnL"),u=n.n(d),p=n("QILm"),f=n.n(p);const h=["as","style"];n("3gNG"),n("3gNG");const g=3*n("1T3M").f+"px";const m=Object(o.forwardRef)(((e,t)=>{let{as:i="div",style:r}=e,a=f()(e,h);return o.createElement(i,u()({},a,{style:c()(c()({},r),{},{"--_1t34n0u":Object(n("81+3").a)(g)}),ref:t,className:Object(n("TCwg").a)(["_19pkj0ox",a.className])}))}));const y=({appName:e,appKey:t})=>i.a.createElement(n("WnFT").default,{appName:e,appKey:t});y.displayName="ErrorIndicator";const v=e=>{
const{options:t,appKey:r,moduleKey:l,appName:c,key:d,options:{url:u},location:p="connect-utils.ecosystem-module",onLoad:f,onLoadingComplete:h,onTimeout:g}=e,v=a()(d)?`connect-iFrame-${r}-${l}`:d,b=new(n("KE1l").a)({handleOnLoadingComplete:h,handleOnTimeout:g});return Object(o.useEffect)((()=>{f&&f(p)}),[f,p]),i.a.createElement(m,null,i.a.createElement(s.a,{key:v,appKey:r,moduleKey:l,url:u,connectHost:Object(n("vUoe").a)(),connectIframeProvider:b,options:b.convertConnectOptions(t),width:"100%",height:"100%",failedToLoadIndicator:()=>i.a.createElement(y,{appKey:r,appName:c}),timeoutIndicator:()=>i.a.createElement(y,{appKey:r,appName:c})}),i.a.createElement(n("ebhp").a,{sourceName:"connectEcosystemModule",sourceType:n("2V2x").g},i.a.createElement(n("dY08").b,{attributes:{location:p}})))};v.displayName="ConnectModule";const b=Object(o.memo)(v);t.default=b},KE1l:function(t,n,o){"use strict";o.d(n,"a",(function(){return d})),o.d(n,"b",(function(){return u}))
;var i=o("3tO9"),r=o.n(i),a=o("q1tI"),s=o("vN+2"),l=o.n(s);const c=(e,t)=>o("ZXUb").a.safeInfoWithoutCustomerData("Ecosystem.DefaultConnectIFrameProvider",e,t);class d{constructor({handleHideInlineDialog:t,handleOnLoadingComplete:n,handleOnTimeout:i,isAutoresizeBugfixEnabled:a}={}){this.handleHideInlineDialog=void 0,this.handleOnLoadingComplete=void 0,this.handleOnTimeout=void 0,this.iframeContext=void 0,this.connectHost=void 0,this.isAutoresizeBugfixEnabled=void 0,this.convertConnectOptions=e=>window._AP._convertConnectOptions(e).options,this.onStoreNestedIframeJSON=e=>{c("onStoreNestedIframeJSON",e)},this.getLoadingTimeoutMilliseconds=e=>(c("getLoadingTimeoutMilliseconds",{appKey:e}),3e4),this.handleIframeLoadingStarted=e=>{c("handleIframeLoadingStarted",{appKey:e})},this.handleIframeLoadingComplete=e=>{this.handleOnLoadingComplete(),c("handleIframeLoadingComplete",{appKey:e})},this.handleIframeUnload=e=>{c("handleIframeUnload",{appKey:e})},this.handleIframeLoadTimeout=e=>{
this.handleOnTimeout(),c("handleIframeLoadTimeout",{appKey:e})},this.isJwtExpired=(e,t)=>t.hasJwt&&t.isJwtExpired?e&&t.hasJwt(e)&&t.isJwtExpired(e):(c("connectHost missing JWT utilities"),!1),this.buildIframeStyles=(e,t)=>{if(e===t.TIMEOUT)return{opacity:0,height:"0px"};if(e===t.LOADED){if(this.isAutoresizeBugfixEnabled&&this.iframeContext&&this.connectHost){var n;Object.keys(null===(n=this.connectHost)||void 0===n?void 0:n.getExtensions()).filter((e=>{var t;return this.iframeContext&&e.startsWith(null===(t=this.iframeContext.options)||void 0===t?void 0:t.uniqueKey)})).map((e=>window.document.getElementById(e))).filter((e=>null!=e)).forEach((e=>{var t,n,i,r,a
;"0px"===(null==e||null===(t=e.style)||void 0===t?void 0:t.height)&&(o("ZXUb").a.safeWarnWithoutCustomerData("ecosystem.iframe.provider",`Connect addon iframe with 0 height in loaded state. Set to 100%. appKey: ${null!==(n=null===(i=this.iframeContext)||void 0===i?void 0:i.appKey)&&void 0!==n?n:"null"}, modulekey: ${null!==(r=null===(a=this.iframeContext)||void 0===a?void 0:a.moduleKey)&&void 0!==r?r:"null"}`),e.style.height="100%")}))}return{opacity:1,maxWidth:"100%"}}return null},this.resolveIframeContext=(t,n)=>(this.iframeContext=t,this.connectHost=n,new Promise((i=>{if(t.url&&!this.isJwtExpired(t.url,n))return void i(t);if(!n.getContentResolver||!n.getContentResolver())return c("No content resolver supplied"),void i(t);let a;try{a=Object(o("r5cN").j)()?r()(r()({},t.options),{},{productContext:t.options.productContext?t.options.productContext:{},structuredContext:t.options.structuredContext?t.options.structuredContext:{}}):r()(r()({},t.options),{},{
productContext:t.options.productCtx?JSON.parse(t.options.productCtx):{},structuredContext:t.options.structuredContext?JSON.parse(t.options.structuredContext):{}})}catch(e){return c("Unable to parse supplied productCtx"),void i(t)}n.getContentResolver()({addon_key:t.appKey,key:t.moduleKey,options:a,classifier:"json"}).then((e=>{"object"==typeof e&&e.hasOwnProperty("url")?i({url:e.url,appKey:e.addon_key||t.appKey,moduleKey:e.key||t.moduleKey,options:r()(r()({},t.options),e.options)}):(c("Invalid response"),i(t))}))}))),this.handleHideInlineDialog=t||l.a,this.handleOnLoadingComplete=n||l.a,this.handleOnTimeout=i||l.a,this.isAutoresizeBugfixEnabled=a||!1}onHideInlineDialog(){this.handleHideInlineDialog(),c("DefaultConnectAppProvider.onHideInlineDialog")}}const u=e=>Object(o("r5cN").e)()?(e=>Object(a.useState)((()=>new d(e)))[0])(e):(e=>{const t=Object(a.useRef)();return null==t.current&&(t.current=new d(e)),t.current})(e)},WnFT:function(e,t,n){"use strict";n.r(t),
n.d(t,"TimeoutView",(function(){return c}));var o=n("q1tI"),i=n.n(o),r=n("bRnU"),a=n.n(r);const s=Object(n("D6b/").defineMessages)({timeout:{id:"connect-utils-async.common.ecosystem-timeout-view.timeout",defaultMessage:"We're having trouble connecting to {appName}.\nTry contacting the developer for support.",description:"A message displayed to the user inside Timeout component when there's a problem with rendering a Connect app insideIssue View or Global Issue Create."}}),l=e=>`https://marketplace.atlassian.com/plugins/${e}/cloud/support?rel="noopener noreferrer"`;class c extends o.Component{constructor(...e){super(...e),this.tertiaryAction=i.a.createElement(n("340+").a,{appearance:"subtle-link",href:l(this.props.appKey),target:"_blank"},this.props.appName)}render(){const{appName:e,intl:t}=this.props;return i.a.createElement(i.a.Fragment,null,i.a.createElement(n("Z+5E").a,{size:"narrow",imageUrl:a.a,maxImageWidth:80,maxImageHeight:80,isLoading:!1,description:t.formatMessage(s.timeout,{
appName:e}),tertiaryAction:this.tertiaryAction}))}}c.displayName="TimeoutView",c.displayName="TimeoutView",t.default=Object(n("W3MJ").a)(c)},bRnU:function(e,t,n){e.exports=n.p+"assets/error.e8afc9af3d98977cd3c1a0efe57c7170.8.svg"},g48e:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var o,i,r=function(){function e(){}return e.prototype.trigger=function(e,t,n){},e.prototype.markAsSafe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(e){return e}},e.prototype.dangerouslyCreateSafeString=function(e){return e},e}(),a=new r,s=function(){function e(){}return e.prototype.debug=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];console.debug.apply(console,arguments)},e.prototype.info=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];console.info.apply(console,arguments)},e.prototype.warn=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];console.warn.apply(console,arguments)},
e.prototype.error=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];console.error.apply(console,arguments)},e}(),l=new s,c=function(){function e(){this.debugEnabled=!1,this.infoEnabled=!0}return e.prototype.isDebugEnabled=function(){return this.debugEnabled},e.prototype.isInfoEnabled=function(){return this.infoEnabled},e.prototype.enableDebug=function(){return console.info("Enabling debug..."),this.debugEnabled=!0,"Debug level logging is now enabled.   \u06dc(\u05e1\u05bc\u06ba\u05e1\u05bc\u064e` )/\u06dc"},e.prototype.disableDebug=function(){return console.info("Disabling debug..."),this.debugEnabled=!1,"Debug level logging is now disabled. \u03b5(\xb4\u05e1\u05bc\ufe35\u05e1\u05bc`)\u0437"},e.prototype.enableInfo=function(){return console.info("Enabling info..."),this.infoEnabled=!0,"Info level logging is now enabled. \u3010\u30c4\u3011"},e.prototype.disableInfo=function(){return console.info("Disabling info..."),this.debugEnabled=!1,this.infoEnabled=!1,
"Info level logging is now disabled. (-.-)Zzz..."},e}(),d=function(){function e(){this.loggerAPI=l,this.loggerController=new c,window._loggerController=this.loggerController}return e.prototype.registerLoggerAPI=function(e){this.loggerAPI=e},e.prototype.debug=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];try{this.loggerController.isDebugEnabled()&&this.loggerAPI.debug.apply(this.loggerAPI,arguments)}catch(o){}},e.prototype.info=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];try{this.loggerController.isInfoEnabled()&&this.loggerAPI.info.apply(this.loggerAPI,arguments)}catch(o){}},e.prototype.warn=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];try{this.loggerAPI.warn.apply(this.loggerAPI,arguments)}catch(i){var o=console.warn||console.log;o&&o.apply(o,arguments)}},e.prototype.error=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];try{this.loggerAPI.error.apply(this.loggerAPI,arguments)
}catch(i){var o=console.error||console.log;o&&o.apply(o,arguments)}},e}(),u=new d,p=function(){function e(){this.loggingEnabled=!1}return e.prototype.isLoggingEnabled=function(){return this.loggingEnabled},e.prototype.enableAnalyticsLogging=function(){return console.info("Enabling analytics logging..."),this.loggingEnabled=!0,"Analytics logging is now enabled. (>'-')> <('_'<) ^('_')- m/(-_-)m/ <( '-')> _( .\")> <( ._.)-`"},e.prototype.disableAnalyticsLogging=function(){return console.info("Disabling analytics logging..."),this.loggingEnabled=!1,"Analytics logging is now disabled. \xaf\\_(\u30c4)_/\xaf"},e}(),f=function(){function e(){this.analyticsAPI=a,this.analyticsController=new p,window._analyticsController=this.analyticsController}return e.prototype.registerAnalyticsAPI=function(e){this.analyticsAPI=e},e.prototype.trigger=function(e,t,n,o){try{this.analyticsAPI.trigger(e,t,n,o),this.analyticsController.isLoggingEnabled()&&u.info("Analytics:",e,t,n,o)}catch(i){
u.warn("Exception trapped triggering analytics event",i)}},e.prototype.markAsSafe=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.analyticsAPI.markAsSafe?(e=this.analyticsAPI).markAsSafe.apply(e,t):a.markAsSafe.apply(a,t)},e.prototype.dangerouslyCreateSafeString=function(e){return this.analyticsAPI.dangerouslyCreateSafeString?this.analyticsAPI.dangerouslyCreateSafeString(e):a.dangerouslyCreateSafeString(e)},e}(),h=new f,g=function(){function e(){this.moduleNamesToModules=new Map}return e.prototype.registerModule=function(e,t){var n=e.getModuleRegistrationName();this.moduleNamesToModules.set(n,e);var o=e.getSimpleXdmDefinitionBuilder().buildSimpleXdmDefinition();this.registerModuleWithHost(n,o)},e.prototype.getModuleByName=function(e){return this.moduleNamesToModules.get(e)},e.prototype.getProviderByModuleName=function(e){var t=this.moduleNamesToModules.get(e);return t&&t.isEnabled()?t.getProvider():void 0},e}(),m=function(e){function t(){
return null!==e&&e.apply(this,arguments)||this}return n("mrSG").__extends(t,e),t.prototype.registerModuleWithHost=function(e,t){},t.prototype.getProviderByModuleName=function(t){return e.prototype.getProviderByModuleName.call(this,t)},t}(g),y=(new m,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n("mrSG").__extends(t,e),t.prototype.registerModuleWithHost=function(e,t){},t}(g)),v=(new y,n("q1tI")),b=n("17x9");!function(e){e.dialog="dialog",e.iframe="iframe",e.inlineDialog="inlineDialog"}(o||(o={})),function(e){e.create="create",e.close="close",e.error="error",e.timeout="timeout",e.established="established"}(i||(i={}));var I,E=[i.create,i.close,i.error,i.timeout,i.established],w=[],S=!0,D=function(e){var t=w.find((function(t){return e.extension.id===t.getId()}));if(t){var n=t.getIFrameLifecycleEventManager();n&&n.iframeEstablishedCallback(e)}},P=function(e){var t=w.find((function(t){return e.extension.id===t.getId()}));if(t){
var n=t.getIFrameLifecycleEventManager();n&&n.iframeUnloadCallback(e)}},x=function(){return function(e){var t=this;this.reset=function(){w=[],S=!0},this.unregister=function(e){var n=w.indexOf(e);n>-1&&w.splice(n,1),t.clearTimeoutDetectionProcessing()},this.iframeEstablishedCallback=function(e){u.debug("Established iframe for add-on ",e.extension.addon_key,e),t.connectIframe.props.connectIframeProvider.handleIframeLoadingComplete&&t.connectIframe.props.connectIframeProvider.handleIframeLoadingComplete(e.extension.addon_key);var n=(new Date).getTime()-t.creationTimeMs,r={hostFrameOffset:h.dangerouslyCreateSafeString((t.connectIframe.props.options.hostFrameOffset||1).toString()),durationToLoadMs:h.dangerouslyCreateSafeString(n.toString())};h.trigger(o.iframe,h.markAsSafe.apply(h,E)(i.established),h.dangerouslyCreateSafeString(e.extension.addon_key),r),t.connectIframe.iframeEstablishedCallback(),t.clearTimeoutDetectionProcessing()},this.iframeUnloadCallback=function(e){
u.debug("Unloaded iframe for add-on ",e.extension.id,e),t.connectIframe.props.connectIframeProvider.handleIframeUnload&&t.connectIframe.props.connectIframeProvider.handleIframeUnload(e.extension.id);var n=(new Date).getTime()-t.creationTimeMs,r={hostFrameOffset:h.dangerouslyCreateSafeString((t.connectIframe.props.options.hostFrameOffset||1).toString()),sessionDurationMs:h.dangerouslyCreateSafeString(n.toString())};h.trigger(o.iframe,h.markAsSafe.apply(h,E)(i.close),h.dangerouslyCreateSafeString(e.extension.id),r)},this.startTimeoutDetectionProcessing=function(){u.debug("Starting iframe timed out processing for add-on ",t.connectIframe.props.appKey);var e=t.getLoadingTimeout();t.timeoutHandle=window.setTimeout((function(){u.warn("Add-on iframe timed out for add-on ",t.connectIframe.props.appKey),t.timeoutHandle=0,
t.connectIframe.props.connectIframeProvider.handleIframeLoadTimeout&&t.connectIframe.props.connectIframeProvider.handleIframeLoadTimeout(t.connectIframe.props.appKey,t.connectIframe.iframeFailedToLoadCallback.bind(t));var e={hostFrameOffset:h.dangerouslyCreateSafeString((t.connectIframe.props.options.hostFrameOffset||1).toString())};h.trigger(o.iframe,h.markAsSafe.apply(h,E)(i.timeout),h.dangerouslyCreateSafeString(t.connectIframe.props.appKey),e),t.connectIframe.iframeTimeoutCallback()}),e)},this.getLoadingTimeout=function(){var e=t.connectIframe.props.connectIframeProvider.getLoadingTimeoutMilliseconds?t.connectIframe.props.connectIframeProvider.getLoadingTimeoutMilliseconds(t.connectIframe.props.appKey):12e3;return e&&e>0?e:12e3},this.clearTimeoutDetectionProcessing=function(){t.timeoutHandle&&(u.debug("Clearing iframe timed out timer for add-on ",t.connectIframe.props.appKey),window.clearTimeout(t.timeoutHandle),t.timeoutHandle=0)},this.creationTimeMs=(new Date).getTime(),
this.connectIframe=e,w.push(e),S&&(this.connectIframe.props.connectHost.onIframeEstablished(D),this.connectIframe.props.connectHost.onIframeUnload(P),S=!1),this.startTimeoutDetectionProcessing(),this.connectIframe.props.connectIframeProvider.handleIframeLoadingStarted&&this.connectIframe.props.connectIframeProvider.handleIframeLoadingStarted(this.connectIframe.props.appKey)}}(),C=Object.freeze({INIT:Symbol("init"),LOADED:Symbol("loaded"),FAILED:Symbol("failed"),TIMEOUT:Symbol("timeout"),LOADING:Symbol("loading"),RESOLVING:Symbol("resolving")}),A=function(e){function t(t){var n=e.call(this,t)||this;return n.unmountCallbacks=[],n.resize=function(e,t){n.setState({width:e,height:t})},n.sizeToParent=function(){n.setState({width:"100%",height:"100%"})},n.registerUnmountCallback=function(e){n.unmountCallbacks.push(e)},n.hideInlineDialog=function(){n.props.connectIframeProvider.onHideInlineDialog&&n.props.connectIframeProvider.onHideInlineDialog()},n.getId=function(){
return n.iframeAttributes?n.iframeAttributes.id:null},n.getIFrameLifecycleEventManager=function(){return n.iframeLifecycleEventManager},n.iframeEstablishedCallback=function(){n.setState({loadingState:C.LOADED})},n.iframeFailedToLoadCallback=function(){n.setState({loadingState:C.FAILED})},n.iframeTimeoutCallback=function(){n.setState({loadingState:C.TIMEOUT})},n._createIFrameLifecycleManager=function(){n.iframeLifecycleEventManager=new x(n)},n._unregisterIFrameLifecycleManager=function(){n.iframeLifecycleEventManager&&n.iframeLifecycleEventManager.unregister(n)},n._createExtension=function(){var e=n.props.connectHost.createExtension({addon_key:n.iframeContext.appKey,key:n.iframeContext.moduleKey,url:n.iframeContext.url,options:Object.assign({},n.iframeContext.options,{resize:n.resize.bind(n),sizeToParent:n.sizeToParent.bind(n),registerUnmountCallback:n.registerUnmountCallback.bind(n),_contextualOperations:{hideInlineDialog:n.hideInlineDialog.bind(n)}})})
;n.iframeAttributes=e.iframeAttributes,u.debug("Created iframe for add-on ",n.iframeContext.appKey,n.iframeAttributes),h.trigger(o.iframe,h.markAsSafe.apply(h,E)(i.create),h.dangerouslyCreateSafeString(n.iframeContext.appKey),{})},n._destroyExtension=function(){n.iframeAttributes&&n.props.connectHost.destroy(n.iframeAttributes.id)},n._isSubIframe=function(){return n.state.hostFrameOffset&&n.state.hostFrameOffset>1},n._initialise=function(){if(n.props.children&&n.props.connectIframeProvider.onStoreNestedIframeJSON){var e=n.props.children.props;n.props.connectIframeProvider.onStoreNestedIframeJSON(e)}if(n._isSubIframe())n.setState({loadingState:C.LOADING});else{if(n._createIFrameLifecycleManager(),!n.props.connectIframeProvider.resolveIframeContext)return n._createExtension(),void n.setState({loadingState:C.LOADING});n.props.connectIframeProvider.resolveIframeContext(n.iframeContext,n.props.connectHost).then((function(e){
e.appKey!==n.props.appKey||e.moduleKey!==n.props.moduleKey?u.warn("Iframe context changed during resolution"):(n.iframeContext=e,n._createExtension(),n.setState({loadingState:C.LOADING}))}))}},n.state={width:t.width,height:t.height,loadingState:C.INIT,hostFrameOffset:t.options.hostFrameOffset||1},n.iframeContext={url:t.url,appKey:t.appKey,moduleKey:t.moduleKey,options:t.options},n}return n("mrSG").__extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.props.appKey===e.appKey&&this.props.moduleKey===e.moduleKey||(this._unregisterIFrameLifecycleManager(),this._destroyExtension(),this.setState({width:e.width,height:e.height,hostFrameOffset:e.options.hostFrameOffset||1,loadingState:C.INIT}))},t.prototype.componentWillUnmount=function(){this.unmountCallbacks.forEach((function(e){return e()})),this._unregisterIFrameLifecycleManager(),this._destroyExtension()},t.prototype.render=function(){switch(this.state.loadingState){case C.LOADED:case C.LOADING:case C.TIMEOUT:var e=void 0
;return this.props.connectIframeProvider.buildIframeStyles&&(e=this.props.connectIframeProvider.buildIframeStyles(this.state.loadingState,C)),e||this.state.loadingState!==C.LOADING&&this.state.loadingState!==C.TIMEOUT||(e={opacity:0}),v.createElement(this.props.iframeContainer,{width:this.state.width,height:this.state.height},this.state.loadingState===C.TIMEOUT?v.createElement(this.props.timeoutIndicator,{failedCallback:this.iframeFailedToLoadCallback.bind(this)}):null,this.state.loadingState===C.LOADING?v.createElement(this.props.loadingIndicator,null):null,this._isSubIframe()?this.props.children:v.createElement("iframe",n("mrSG").__assign({frameBorder:"0",width:this.state.width,height:this.state.height,style:e},this.iframeAttributes,{referrerPolicy:"no-referrer"}),this.props.children));case C.FAILED:return v.createElement("div",{style:{height:this.state.height}},v.createElement(this.props.failedToLoadIndicator,null));case C.INIT:case C.RESOLVING:default:return null}},
t.prototype.componentDidMount=function(){this.state.loadingState===C.INIT&&(this.setState({loadingState:C.RESOLVING}),this._initialise())},t.prototype.componentDidUpdate=function(){this.state.loadingState===C.INIT&&(this.setState({loadingState:C.RESOLVING}),this._initialise())},t.propTypes={connectHost:b.object.isRequired,appKey:b.string.isRequired,moduleKey:b.string.isRequired,iframeContainer:b.func,loadingIndicator:b.func,failedToLoadIndicator:b.func,timeoutIndicator:b.func,url:b.string,width:b.string,height:b.string,options:b.object,connectIframeProvider:b.object},t.defaultProps={options:{},connectIframeProvider:{},iframeContainer:function(e){var t=e.width,n=e.height,o=e.children;return v.createElement("div",{style:{position:"relative",width:"100%"===t?"100%":"auto",height:"100%"===n?"100%":"auto"}},o)},failedToLoadIndicator:function(){return null},loadingIndicator:function(){return null},timeoutIndicator:function(){return null}},t}(v.PureComponent);!function(e){
e.MIN_REGISTRATION_NAME_LENGTH=1,e.MAX_REGISTRATION_NAME_LENGTH=50}(I||(I={}));var _,O=function(e){function t(t){return e.call(this,t)||this}return n("mrSG").__extends(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=this.getModuleRegistrationName();u.debug("Mounting module",t,"..."),this.validateRegistrationName(t),e.adaptor.registerModule(this,e);var n=this.state;n.enabled=!0,n.registered=!0,this.setState(n)},t.prototype.setEnabled=function(e){var t=this.state;t.enabled=e,this.setState(t)},t.prototype.isEnabled=function(){return this.state.enabled},t.prototype.componentWillUnmount=function(){},t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.validateRegistrationName=function(e){if(!e||e.length<I.MIN_REGISTRATION_NAME_LENGTH)throw new Error("The registration name is too short (< "+I.MIN_REGISTRATION_NAME_LENGTH+" characters).")
;if(e.length>I.MAX_REGISTRATION_NAME_LENGTH)throw new Error("The registration name is too long (> "+I.MAX_REGISTRATION_NAME_LENGTH+" characters).");if(!e.match(/^[a-z]+$/i))throw new Error("The registration name must only contain alphabetic characters.")},t.prototype.render=function(){return null},t}(v.Component),N=function(){function e(e){if(!e)throw new Error("flagProvider is not defined");this.flagProvider=e}return e.prototype.buildSimpleXdmDefinition=function(){var e=this.flagProvider,t=function(){function t(t,n){t.id=n._id;var o=n._id,i=[];"object"==typeof t.actions&&(i=Object.getOwnPropertyNames(t.actions).map((function(e){return{actionKey:e,actionText:t.actions[e],executeAction:function(){console.log('This needs to be implemented by broadcasting a "flag-action-invoked" event.')}}})));var r={id:o,title:t.title,body:t.body,actions:i,onClose:function(){console.log('This needs to be implemented by broadcasting a "flag.close" event.')},close:t.close,type:t.type.toLowerCase()}
;this.flag=e.create(r)}return t.prototype.close=function(){this.flag.close()},t}();return{create:{constructor:t,close:t.prototype.close}}},e}();!function(e){e.FLAG_MODULE_NAME="flag";var t=function(){return function(e,t){this.adaptor=e,this.flagProvider=t}}();e.Props=t;var n=function(){return function(e){this.enabled=!0,this.registered=!1,this.flagProvider=e,this.simpleXdmDefinitionBuilder=new N(e)}}();e.State=n}(_||(_={}));(function(e){function t(t){return e.call(this,t)||this}n("mrSG").__extends(t,e),t.prototype.componentWillMount=function(){if(!this.props.flagProvider)throw new Error("this.props.flagProvider is not defined");this.setState(new _.State(this.props.flagProvider))},t.prototype.getModuleRegistrationName=function(){return _.FLAG_MODULE_NAME},t.prototype.getSimpleXdmDefinitionBuilder=function(){return this.state.simpleXdmDefinitionBuilder},t.prototype.getProvider=function(){return this.props.flagProvider},t.prototype.render=function(){return null}})(O),function(){
function e(){}e.prototype.hide=function(e){e.extension.options._contextualOperations&&e.extension.options._contextualOperations.hideInlineDialog&&"function"==typeof e.extension.options._contextualOperations.hideInlineDialog?(e.extension.options._contextualOperations.hideInlineDialog(),u.debug("Hiding inline dialog..."),h.trigger(o.inlineDialog,i.close,e.extension.addon_key,{})):(u.warn("Attempted to hide the inline dialog for a malformed app: ",e),h.trigger(o.inlineDialog,i.error,e.extension.addon_key,{message:"No hideInlineDialog function"}))}}();var M,T=function(){function e(e){if(!e)throw new Error("dialogProvider is not defined");this.dialogProvider=e}return e.prototype.buildSimpleXdmDefinition=function(){return{}},e}();!function(e){e.DIALOG_MODULE_NAME="dialog";var t=function(){return function(e,t){this.adaptor=e,this.dialogProvider=t}}();e.Props=t;var n=function(){return function(e){this.enabled=!0,this.registered=!1,this.dialogProvider=e,this.simpleXdmDefinitionBuilder=new T(e)}
}();e.State=n}(M||(M={}));!function(e){function t(t){return e.call(this,t)||this}n("mrSG").__extends(t,e),t.prototype.componentWillMount=function(){if(!this.props.dialogProvider)throw new Error("this.props.dialogProvider is not defined");this.setState(new M.State(this.props.dialogProvider))},t.prototype.getModuleRegistrationName=function(){return M.DIALOG_MODULE_NAME},t.prototype.getSimpleXdmDefinitionBuilder=function(){return this.state.simpleXdmDefinitionBuilder},t.prototype.getProvider=function(){return this.props.dialogProvider},t.prototype.render=function(){return null}}(O);var L,k=function(){function e(e){if(!e)throw new Error("dropdownProvider is not defined");this.dropdownProvider=e}return e.prototype.buildSimpleXdmDefinition=function(){return{}},e}();!function(e){e.DROPDOWN_MODULE_NAME="dropdown";var t=function(){return function(e,t){this.adaptor=e,this.dropdownProvider=t}}();e.Props=t;var n=function(){return function(e){this.enabled=!0,this.registered=!1,
this.dropdownProvider=e,this.simpleXdmDefinitionBuilder=new k(e)}}();e.State=n}(L||(L={}));!function(e){function t(t){return e.call(this,t)||this}n("mrSG").__extends(t,e),t.prototype.componentWillMount=function(){if(!this.props.dropdownProvider)throw new Error("this.props.dropdownProvider is not defined");this.setState(new L.State(this.props.dropdownProvider))},t.prototype.getModuleRegistrationName=function(){return L.DROPDOWN_MODULE_NAME},t.prototype.getSimpleXdmDefinitionBuilder=function(){return this.state.simpleXdmDefinitionBuilder},t.prototype.getProvider=function(){return this.props.dropdownProvider},t.prototype.render=function(){return null}}(O);var F,K=function(){function e(e){if(!e)throw new Error("inlineDialogProvider is not defined");this.inlineDialogProvider=e}return e.prototype.buildSimpleXdmDefinition=function(){return{}},e}();!function(e){e.INLINE_DIALOG_MODULE_NAME="inlineDialog";var t=function(){return function(e,t){this.adaptor=e,this.inlineDialogProvider=t}}()
;e.Props=t;var n=function(){return function(e){this.enabled=!0,this.registered=!1,this.inlineDialogProvider=e,this.simpleXdmDefinitionBuilder=new K(e)}}();e.State=n}(F||(F={}));!function(e){function t(t){return e.call(this,t)||this}n("mrSG").__extends(t,e),t.prototype.componentWillMount=function(){if(!this.props.inlineDialogProvider)throw new Error("this.props.inlineDialogProvider is not defined");this.setState(new F.State(this.props.inlineDialogProvider))},t.prototype.getModuleRegistrationName=function(){return F.INLINE_DIALOG_MODULE_NAME},t.prototype.getSimpleXdmDefinitionBuilder=function(){return this.state.simpleXdmDefinitionBuilder},t.prototype.getProvider=function(){return this.props.inlineDialogProvider},t.prototype.render=function(){return null}}(O);var B,G=function(){function e(e){if(!e)throw new Error("messageProvider is not defined");this.messageProvider=e}return e.prototype.buildSimpleXdmDefinition=function(){return{}},e}();!function(e){e.MESSAGE_MODULE_NAME="messages"
;var t=function(){return function(e,t){this.adaptor=e,this.messageProvider=t}}();e.Props=t;var n=function(){return function(e){this.enabled=!0,this.registered=!1,this.messageProvider=e,this.simpleXdmDefinitionBuilder=new G(e)}}();e.State=n}(B||(B={}));!function(e){function t(t){return e.call(this,t)||this}n("mrSG").__extends(t,e),t.prototype.componentWillMount=function(){if(!this.props.messageProvider)throw new Error("this.props.messageProvider is not defined");this.setState(new B.State(this.props.messageProvider))},t.prototype.getModuleRegistrationName=function(){return B.MESSAGE_MODULE_NAME},t.prototype.getSimpleXdmDefinitionBuilder=function(){return this.state.simpleXdmDefinitionBuilder},t.prototype.getProvider=function(){return this.props.messageProvider},t.prototype.render=function(){return null}}(O);var H=function(){function e(){}return e.checkExists=function(e,t){if(!t)throw new Error(e+" does not exist.")},e.checkPropertyExists=function(t,n,o){var i=n[o]
;if(!i)throw new Error("Expected "+t+" to have a property: "+o+".");if(e.isFunction(i))throw new Error(t+" has a property "+o+", but it is a function.")},e.checkFunctionExists=function(t,n,o){var i=n[o];if(!i)throw new Error("Expected "+t+" to have a function: "+o+".");if(!e.isFunction(i))throw new Error(t+" has a property "+o+", but it is a "+(typeof i+" (value: "+i+")")+" rather than a function.")},e.isFunction=function(e){return"function"==typeof e},e}(),R=(function(){function e(){}e.validate=function(e){H.checkFunctionExists("dialogProvider",e,"create"),H.checkFunctionExists("dialogProvider",e,"close"),H.checkFunctionExists("dialogProvider",e,"setButtonDisabled"),H.checkFunctionExists("dialogProvider",e,"isButtonDisabled"),H.checkFunctionExists("dialogProvider",e,"toggleButton"),H.checkFunctionExists("dialogProvider",e,"setButtonHidden"),H.checkFunctionExists("dialogProvider",e,"isButtonHidden"),H.checkFunctionExists("dialogProvider",e,"isActiveDialog");var t={key:"my-dialog",
size:"medium",width:"100%",height:"50px",chrome:!1,header:"My header",actions:[{identifier:"my-action",text:"Some Action",onClick:function(){!0}}],closeOnEscape:!0,hint:"this is a test"},n="foo-app",o={addon_key:n,key:"foo-key",options:{}};e.create(t,o);setTimeout((function(){if(!e.isActiveDialog(n))throw new Error("The dialog should be active");if(e.isActiveDialog("bogus_app"))throw new Error("The dialog should not be active");if(e.isButtonDisabled("my-action"))throw new Error("Button should be enabled by default");if(e.setButtonDisabled("my-action",!0),!e.isButtonDisabled("my-action"))throw new Error("Button should have been disabled.");if(e.toggleButton("my-action"),e.isButtonDisabled("my-action"))throw new Error("Button should have been re-enabled.");if(e.isButtonHidden("my-action"))throw new Error("Button should be visible by default");if(e.setButtonHidden("my-action",!0),!e.isButtonHidden("my-action"))throw new Error("Button should have been hidden.");e.close()}),0)}}(),
function(){return function(){}}()),U=(function(){}(),function(){function e(){}e.validate=function(t){H.checkFunctionExists("flagProvider",t,"create"),H.checkFunctionExists("flagProvider",t,"isFlagOpen"),e.validateFlagCreationAndDeletions(t,"manual"),e.validateFlagCreationAndDeletions(t,"auto"),e.validateFlagCreationAndDeletions(t,"never")},e.validateFlagCreationAndDeletions=function(t,n){var o=[];e.validateFlagCreationAndDeletion(t,n,o,!1);var i=new R;i.actionKey="some-action",i.actionText="Some Action",i.executeAction=function(){console.log("Action clicked")},o.push(i),e.validateFlagCreationAndDeletion(t,n,o,!1);var r=new R;r.actionKey="some-action",r.actionText="Some Action",o[0]=r,e.validateFlagCreationAndDeletion(t,n,o,!0)},e.validateFlagCreationAndDeletion=function(e,t,n,o){var i=new Map,r={id:"flag-"+(new Date).getMilliseconds(),title:"My Flag",body:"My flag content",type:"success",close:t,onClose:function(e){i.delete(e)},actions:n};try{var a=e.create(r)
;if(o)throw new Error("Expected a validation error, but did not get one.");if(i.set(a.id,a),H.checkExists("flag",a),H.checkFunctionExists("flag",a,"close"),"auto"!==t)if(!e.isFlagOpen(a.id))throw new Error("Expected flag to exist.");if(a.close(),i.size)throw new Error("It looks like the provider did not synchronously call back the onClose method.")}catch(s){if(!o)throw new Error("Did not expect a validation error, but got one.")}}}(),function(){function e(){this.inlineDialogOpen=!0}return e.prototype.resize=function(e,t){throw new Error("Not implemented yet")},e.prototype.sizeToParent=function(){throw new Error("Not implemented yet")},e.prototype.hideInlineDialog=function(){this.inlineDialogOpen=!1},e.prototype.isInlineDialogOpen=function(){return this.inlineDialogOpen},e}()),j=function(){return function(e,t,n,o){this.addon_key=e,this.id=t,this.key=n,this.options=o}}(),X=function(){return function(e,t,n,o){this.autoresize=e,this.widthinpx=t,this.hostFrameOffset=n,
this._contextualOperations=o}}(),W=function(){function e(e){this.extension=e}return e.buildNewInstance=function(){var t=new U,n=new X(!0,!0,1,t),o=(new Date).getMilliseconds();return new e(new j("foo","foo__bar__"+o,"bar",n))},e}(),z=(function(){function e(){}e.validate=function(e){H.checkFunctionExists("inlineDialogProvider",e,"hide");var t=W.buildNewInstance();e.hide(t)}}(),function(){function e(){}e.validate=function(e){H.checkFunctionExists("messageProvider",e,"clear"),H.checkFunctionExists("messageProvider",e,"onClose");["generic","hint","info","success","warning","error"].forEach((function(t){H.checkFunctionExists("messageProvider",e,t);var n="message-"+(new Date).getMilliseconds(),o="My Message",i="My message content",r={id:n,closeable:!0,fadeout:!0,delay:2e3,duration:4e3};"generic"===t?e.generic(o,i,r):"hint"===t?e.hint(o,i,r):"info"===t?e.info(o,i,r):"success"===t?e.success(o,i,r):"warning"===t?e.warning(o,i,r):"error"===t&&e.error(o,i,r),H.checkExists("messageId",n)
;var a=!1,s=!1;if(e.onClose(n,(function(){s=!0})),e.onClose("dummy-message-id",(function(){a=!0})),e.clear(n),!s)throw new Error("Expected onClose callback to be called after calling clear.");if(a)throw new Error("Did not expect the dummy onClose callback to be called.")}))}}(),function(){return function(){this.id="mock-iframe-id",this.src="mock-iframe-src",this.name="mock-iframe-name"}}()),J=function(){return function(){this.iframeAttributes=new z,this.extension={}}}()}}]);try{window.__jsEvalStop("async-connect-utils-ecosystem-module.js")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-source-maps/assets/async-connect-utils-ecosystem-module.0df33f7afa39703d9ae7.8.js.map