;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:dialog', location = 'workflow-designer-module/js/util/DialogSizeCalculator.js' */
define("workflow-designer/dialog-size-calculator",["workflow-designer/underscore","jquery"],function(i,t){return{DISTANCE_FROM_EDGE:100,calculateDialogSize:function(t,e){return this.dialog=t,e=i.defaults(e||{},{windowHeight:this._getWindowHeight(),windowWidth:this._getWindowWidth(),dialogHeaderHeight:this._getDialogHeaderHeight(),dialogFooterHeight:this._getDialogFooterHeight()}),{height:this._calculateDialogHeight(e.windowHeight,e.dialogHeaderHeight,e.dialogFooterHeight),width:this._calculateDialogWidth(e.windowWidth)}},_calculateDialogHeight:function(i,t,e){return i-t-e-2*this.DISTANCE_FROM_EDGE},_calculateDialogWidth:function(i){return i-2*this.DISTANCE_FROM_EDGE},_getWindowHeight:function(){return t(window).height()},_getWindowWidth:function(){return t(window).width()},_getDialogHeaderHeight:function(){return this.dialog.$popupHeading?this.dialog.$popupHeading.outerHeight():0},_getDialogFooterHeight:function(){return this.dialog.$buttonContainer.outerHeight()}}}),AJS.namespace("JIRA.WorkflowDesigner.DialogSizeCalculator",null,require("workflow-designer/dialog-size-calculator"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:dialog', location = 'workflow-designer-module/js/views/dialogs/Dialog.js' */
define("workflow-designer/dialog",["workflow-designer/dialog-size-calculator","jira/dialog/form-dialog","workflow-designer/application-loader","workflow-designer/templates","jira/dialog/dialog","workflow-designer/underscore","jquery"],function(i,o,e,t,n,s,r){return o.extend({init:function(i){s.bindAll(this,"_sizeAndPositionDialog"),i=s.defaults({},i,{content:this.createDialogContent,isDraft:!1,onContentRefresh:this._showWorkflowDesigner,widthClass:"large",useReadyForInteractionMetric:!0}),this.options=i,this.sizeAndPositionDialog=s.throttle(this._sizeAndPositionDialog,100),this._super(i),this.onContentReady(this._addLabelHint)},createDialogContent:function(i){i(t.Dialog.workflowDialog({title:s.result(this.options,"workflowId")}))},show:function(){this._super.apply(this,arguments),r(window).on("resize",this.sizeAndPositionDialog)},hide:function(){this._designer&&(this._designer.off("loaded",this._onDesignerLoaded,this),this._designer.destroy()),this._super.apply(this,arguments),r(window).off("resize",this.sizeAndPositionDialog)},_sizeAndPositionDialog:function(){var o,e;n.current===this&&(e=i.calculateDialogSize(this),this.options.width=e.width,o=this.$popup.find(".form-body"),o.css({height:e.height,maxHeight:""}),this._positionInCenter())},_showWorkflowDesigner:function(){var i=this;this._sizeAndPositionDialog(),e.load(function(o){i.isCurrent()&&(i._designer=new o({actions:!1,element:i.get$popup().find(".form-body"),immutable:!0,draft:s.result(i.options,"isDraft"),layoutData:s.result(i.options,"layoutData"),workflowId:s.result(i.options,"workflowId"),currentStepId:s.result(i.options,"currentStepId")}),i.options.useReadyForInteractionMetric&&i._designer.on("loaded",i._onDesignerLoaded,i))})},_onDesignerLoaded:function(){r(document).trigger("dialogContentReadyForInteraction",[this])},_addLabelHint:function(){this.getButtonsContainer().prepend(t.Dialog.labelMouseOverHint())}})}),AJS.namespace("JIRA.WorkflowDesigner.Dialog",null,require("workflow-designer/dialog"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:dialog', location = 'workflow-designer-module/soy/Dialog.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.WorkflowDesigner&&(JIRA.WorkflowDesigner={}),"undefined"==typeof JIRA.WorkflowDesigner.Templates&&(JIRA.WorkflowDesigner.Templates={}),"undefined"==typeof JIRA.WorkflowDesigner.Templates.Dialog&&(JIRA.WorkflowDesigner.Templates.Dialog={}),JIRA.WorkflowDesigner.Templates.Dialog.workflowDialog=function(e,o){return'<div class="aui-dialog-content"><h2 class="dialog-title">'+soy.$$escapeHtml(e.title)+'</h2><div class="form-body"></div></div>'},JIRA.WorkflowDesigner.Templates.Dialog.labelMouseOverHint=function(e,o){return'<div class="buttons-container-left"><small>'+soy.$$escapeHtml("Pase el cursor por encima de los objetos para ver el nombre de las transiciones.")+"</small></div>"};;