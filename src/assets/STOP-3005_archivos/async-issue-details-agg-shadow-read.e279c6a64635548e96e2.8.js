try{window.performance.mark("async-issue-details-agg-shadow-read.js:eval-start")}catch(e){}(window.webpackJsonp=window.webpackJsonp||[]).push([["async-issue-details-agg-shadow-read"],{"1LK5":function(e,a){e.exports=function(e,a){var t=e.length;for(e.sort(a);t--;)e[t]=e[t].value;return e}},IWTy:function(e,a,t){var i=t("yue5");e.exports=function(e,a,t){for(var l=-1,r=e.criteria,s=a.criteria,n=r.length,o=t.length;++l<n;){var u=i(r[l],s[l]);if(u)return l>=o?u:u*("desc"==t[l]?-1:1)}return e.index-a.index}},alwl:function(e,a,t){var i=t("eUgh"),l=t("ZWtO"),r=t("ut/Y"),s=t("l9OW"),n=t("1LK5"),o=t("sEf8"),u=t("IWTy"),d=t("zZ0H"),c=t("Z0cm");e.exports=function(e,a,t){a=a.length?i(a,(function(e){return c(e)?function(a){return l(a,1===e.length?e[0]:e)}:e})):[d];var v=-1;a=i(a,o(r));var p=s(e,(function(e,t,l){return{criteria:i(a,(function(a){return a(e)})),index:++v,value:e}}));return n(p,(function(e,a){return u(e,a,t)}))}},ijpH:function(e,a,t){"use strict";t.r(a),
t.d(a,"LOGGER_LOCATION",(function(){return qe})),t.d(a,"CONSISTENCY_CHECK_FF_KEY",(function(){return Ke})),t.d(a,"SECONDARY_CONSISTENCY_CHECK_FF_KEY",(function(){return $e}));var i=t("q1tI"),l=t("Ku+5"),r=t("3tO9"),s=t.n(r),n=t("Y+p1"),o=t.n(n);const u=new Map,d=e=>"string"==typeof e?e:"object"==typeof e||"number"==typeof e||"boolean"==typeof e?JSON.stringify(e):`!!unable to convert ${typeof e} to string!!`,c=(e,a,t)=>({featureFlagName:e.featureFlagName,featureFlagValue:e.value,oldValue:d(a),newValue:d(t)}),v=e=>{(({featureFlagName:e,value:a})=>{const t=`${e}-${a}`,i=u.get(t),l=Date.now();return(void 0===i||l-i>15e3)&&(u.set(t,l),!0)})({featureFlagName:e.featureFlagName,value:e.featureFlagValue})&&t("Ltg2").a.unsafeErrorWithCustomerData("rolloutServiceConsistencyCheck","inconsistentData while comparing old and new data",e)},p=async(e,a,i,l)=>{const{areValuesEqual:r,inCaseOfInconsistencyLog:n}=l,o={flagValue:e.value,featureFlagName:e.featureFlagName};switch(e.value){case"OLD":{
const e=await a();return s()(s()({},o),{},{value:e,oldValue:e})}case"NEW":{const e=await i();return s()(s()({},o),{},{value:e,newValue:e})}case"CHECK":try{const[t,l]=await Promise.allSettled([a(),i()]);if("fulfilled"!==t.status)throw new Error(t.reason);const u=t.value;if("fulfilled"!==l.status)return s()(s()({},o),{},{value:u,oldValue:u,areValuesEqual:!1});const d=l.value,c=r(u,d);if(c)return s()(s()({},o),{},{value:u,oldValue:u,newValue:d,areValuesEqual:c});const p=n(e,u,d);return v(p),s()(s()({},o),{},{value:u,oldValue:u,newValue:d,areValuesEqual:c,inconsistencyLog:p})}catch(u){throw u instanceof Error&&(t("Ltg2").a.unsafeErrorWithCustomerData("rolloutServiceConsistencyCheck",`error occured while comparing old and new data flag=${e.featureFlagName}`,u),Object(t("q2+m").a)({meta:{id:"rolloutServiceConsistencyCheck",packageName:"jiraPlatformRolloutServiceAsync"},error:u,sendToPrivacyUnsafeSplunk:!0})),u}case"CHECK_RETURN_NEW":try{const[t,l]=await Promise.allSettled([a(),i()])
;if("fulfilled"!==l.status)throw new Error(l.reason);const u=l.value;if("fulfilled"!==t.status)return s()(s()({},o),{},{value:u,newValue:u,areValuesEqual:!1});const d=t.value,c=r(d,u);if(c)return s()(s()({},o),{},{value:u,oldValue:d,newValue:u,areValuesEqual:c});const p=n(e,d,u);return v(p),s()(s()({},o),{},{value:u,oldValue:d,newValue:u,areValuesEqual:c,inconsistencyLog:p})}catch(u){throw u instanceof Error&&(t("Ltg2").a.unsafeErrorWithCustomerData("rolloutServiceConsistencyCheck",`error occured while comparing old and new data flag=${e.featureFlagName}`,u),Object(t("q2+m").a)({meta:{id:"rolloutServiceConsistencyCheck",packageName:"jiraPlatformRolloutServiceAsync"},error:u,sendToPrivacyUnsafeSplunk:!0})),u}default:throw t("Ltg2").a.safeErrorWithoutCustomerData("rolloutServiceConsistencyCheck",`flag value of ${e.value} was invalid`),new Error(`flag value of ${e.value} was invalid`)}},k=(e,a)=>o()(e,a);let y;!function(e){e.OneSecond="ONE_SECOND",e.TwoSeconds="TWO_SECONDS",
e.ThreeSeconds="THREE_SECONDS",e.FiveSeconds="FIVE_SECONDS",e.TenSeconds="TEN_SECONDS",e.FifteenSeconds="FIFTEEN_SECONDS",e.TwentySeconds="TWENTY_SECONDS"}(y||(y={}));const f={ONE_SECOND:1e3,TWO_SECONDS:2e3,THREE_SECONDS:3e3,FIVE_SECONDS:5e3,TEN_SECONDS:1e4,FIFTEEN_SECONDS:15e3,TWENTY_SECONDS:2e4},g=()=>Object(t("0zaF").a)("issue.details.bento-104666.agg-shadow-read",!1);var N=t("QILm"),R=t.n(N),m=t("tq0P"),h=t.n(m),b=t("3WX/"),w=t.n(b),C=t("xweI"),I=t.n(C)
;const O=[t("rkNR").g,t("rkNR").Z,t("rkNR").Cd,t("rkNR").Jd,t("rkNR").l,t("rkNR").n,t("rkNR").G,t("rkNR").X,t("rkNR").wc,t("rkNR").yc,t("rkNR").qd,t("rkNR").ye,t("rkNR").S,t("rkNR").Db,t("rkNR").Eb,t("rkNR").Fb,t("rkNR").ec,t("rkNR").Id,t("rkNR").Qd,t("rkNR").be,t("rkNR").ne,t("rkNR").pe,t("rkNR").qe,t("rkNR").ze,t("rkNR").Ge,t("rkNR").e,t("rkNR").c,t("rkNR").d,t("rkNR").f,t("rkNR").hd,t("rkNR").He,t("rkNR").kd,"com.atlassian.jira.plugins.work-category-field:work-category-field-cftype","com.atlassian.jconnect.jconnect-plugin:location"],A=["jira.polaris","com.atlassian.jira.plugins.proforma-managed-fields"],E=["allowedValues","value.avatarId","value.description","value.entityId"],T=["value.description","value.iconUrl","value.statusCategory.key","value.statusCategory.colorName","value.statusCategory.name"],j=["avatarUrls.(.*)","timeZone","emailAddress","active"],L=j.map((e=>`value.${e}`)),S=j.map((e=>`value.\\[(.*)\\].${e}`)),D=["value.originalEstimate","value.remainingEstimate","value.timeSpent"],U=["schema.renderer"],V=e=>`value.\\[(.*)].fields.\\[(.*)].${e}`,F=new Set(["title","originalContentLength","otherOriginalChildIssuesLength","issueLimitUrl","value.\\[(.*)].agile","value.\\[(.*)].attachments","value.\\[(.*)].customFields","value.\\[(.*)].isSubtask","value.\\[(.*)].transitions","value.\\[(.*)].fieldCategories","value.\\[(.*)].contextItemsCategories","value.\\[(.*)].contentItemsCategories","value.\\[(.*)].viewScreenId","value.\\[(.*)].isHybridAgilityProject","value.\\[(.*)].expandAssigneeInIssuelinks","value.\\[(.*)].expandAssigneeInSubtasks","value.\\[(.*)].expandSystemDateTimesForChildIssues","value.\\[(.*)].layoutItems","value.\\[(.*)].subtask","value.\\[(.*)].hybridAgilityProject","value.\\[(.*)].contentItems","value.\\[(.*)].expandTimeTrackingInSubtasks","value.\\[(.*)].fields.\\[(.*)].editable","value.\\[(.*)].fields.\\[(.*)].required","value.\\[(.*)].fields.\\[(.*)].title","value.\\[(.*)].fields.\\[(.*)].allowedValues","value.\\[(.*)].fields.\\[(.*)].autoCompleteUrl","value.\\[(.*)].fields.\\[(.*)].operations","value.\\[(.*)].fields.\\[(.*)].hasEditMeta","value.\\[(.*)].fields.\\[(.*)].hasDefaultValue","value.\\[(.*)].fields.\\[(.*)].schema.configuration","value.\\[(.*)].fields.\\[(.*)].schema.custom","value.\\[(.*)].fields.\\[(.*)].schema.items","value.\\[(.*)].fields.\\[(.*)].schema.renderer","value.\\[(.*)].fields.\\[(.*)].schema.customId",...E.map(V),...T.map(V),...L.map(V),...D.map(V)]),x=["title","originalContentLength","otherOriginalChildIssuesLength","issueLimitUrl","value.\\[(.*)].fields.assignee.active","value.\\[(.*)].fields.assignee.avatarUrls","value.\\[(.*)].fields.assignee.emailAddress","value.\\[(.*)].fields.assignee.timeZone","value.\\[(.*)].fields.issuetype.avatarId","value.\\[(.*)].fields.issuetype.description","value.\\[(.*)].fields.status.description","value.\\[(.*)].fields.status.iconUrl","value.\\[(.*)].fields.status.statusCategory.key","value.\\[(.*)].fields.status.statusCategory.colorName","value.\\[(.*)].fields.status.statusCategory.name","value.\\[(.*)].fields.timetracking.originalEstimate","value.\\[(.*)].fields.timetracking.remainingEstimate","value.\\[(.*)].fields.timetracking.timeSpent"],W={
[t("rkNR").m]:L,[t("rkNR").rd]:L,[t("rkNR").J]:["allowedValues.\\[(.*)].description","value.\\[(.*)].description"],[t("rkNR").Y]:["value"],[t("rkNR").fb]:["required"],[t("rkNR").gb]:["schema.renderer"],[t("rkNR").cc]:E,[t("rkNR").zd]:["value.description"],[t("rkNR").Wd]:T,[t("rkNR").se]:D,[t("rkNR").pb]:["value.\\[(.*)].overdue","value.\\[(.*)].releaseDate","allowedValues.\\[(.*)].overdue","allowedValues.\\[(.*)].description","allowedValues.\\[(.*)].releaseDate","allowedValues.\\[(.*)].startDate","allowedValues.\\[(.*)].userReleaseDate","allowedValues.\\[(.*)].userStartDate","allowedValues.\\[(.*)].projectId"],[t("rkNR").b]:["value.\\[(.*)].overdue","value.\\[(.*)].releaseDate","allowedValues.\\[(.*)].overdue","allowedValues.\\[(.*)].description","allowedValues.\\[(.*)].releaseDate","allowedValues.\\[(.*)].startDate","allowedValues.\\[(.*)].userReleaseDate","allowedValues.\\[(.*)].userStartDate","allowedValues.\\[(.*)].projectId"],[t("rkNR").Zd]:x,
[t("rkNR").Xc]:["editable","required","title","value.fields.issuetype.avatarId","value.fields.issuetype.description","value.fields.issuetype.entityId","value.fields.assignee","value.fields.created","value.fields.priority","value.fields.updated","value.fields.status","value.fields.timetracking"],[t("rkNR").bc]:["autoCompleteUrl","value.shouldDisplay"],[t("rkNR").z]:[...F],
[t("rkNR").C]:["value.\\[(.*)].attributes.\\[(.*)].objectAttributeValues.\\[(.*)].user.avatarUrl","value.\\[(.*)].avatar.mediaClientConfig.mediaJwtToken","configuration.cmdbFieldConfig.workspaceId","configuration.cmdbFieldConfig.objectFilterQuery","configuration.cmdbFieldConfig.issueScopeFilterQuery","value.\\[(.*)].avatar.url(16|48|72|144|288)","value.\\[(.*)].attributes.\\[(.*)].objectTypeAttribute.additionalValue","value.\\[(.*)].attributes.\\[(.*)].objectTypeAttribute.description","value.\\[(.*)].attributes.\\[(.*)].objectTypeAttribute.referenceObjectType","value.\\[(.*)].attributes.\\[(.*)].objectTypeAttribute.referenceObjectTypeId","value.\\[(.*)].attributes.\\[(.*)].objectTypeAttribute.referenceType","value.\\[(.*)].attributes.\\[(.*)].objectTypeAttribute.suffix","value.\\[(.*)].attributes.\\[(.*)].objectAttributeValues.\\[(.*)].group.avatarUrl","value.\\[(.*)].attributes.\\[(.*)].objectAttributeValues.\\[(.*)].referencedObject.avatar.mediaClientConfig.mediaJwtToken","value.\\[(.*)].attributes.\\[(.*)].objectAttributeValues.\\[(.*)].referencedObject.avatar.url(16|48|72|144|288)","value.\\[(.*)].attributes.\\[(.*)].objectAttributeValues.\\[(.*)].referencedObject.links","value.\\[(.*)].attributes.\\[(.*)].objectAttributeValues.\\[(.*)].referencedObject.objectType","value.\\[(.*)].attributes.\\[(.*)].objectAttributeValues.\\[(.*)].status.description","value.\\[(.*)].attributes.\\[(.*)].objectAttributeValues.\\[(.*)].status.objectSchemaId","value.\\[(.*)].objectType.description","value.\\[(.*)].objectType.icon"],
[t("rkNR").ib]:[...F],[t("rkNR").mb]:["allowedValues","autoCompleteUrl"],[t("rkNR").qb]:["allowedValues","value.\\[(.*)].value","value.\\[(.*)].id"],[t("rkNR").Zc]:["autoCompleteUrl",...S],[t("rkNR").Kc]:["autoCompleteUrl",...S],[t("rkNR").i]:["autoCompleteUrl",...S],[t("rkNR").Qc]:["value.\\[(.*)]._links","value.\\[(.*)].__links"],[t("rkNR").wd]:["value.requestType.id","schema.renderer","value._links","value.currentStatus","value.i18nErrorMessage","value.requestType.helpText","value.requestType.description","value.requestType.portalId","value.requestType.serviceDeskId","value.requestType._expands","value.requestType._links","value.requestType.groupIds","value.requestType.icon.id","value.requestType.icon._links.iconUrls.16x16","value.requestType.icon._links.iconUrls.24x24","value.requestType.icon._links.iconUrls.32x32"],[t("rkNR").j]:["autoCompleteUrl"],[t("rkNR").Gc]:["autoCompleteUrl"],[t("rkNR").Ic]:["schema.renderer"],[t("rkNR").Gb]:["autoCompleteUrl"],
[t("rkNR").Ae]:["allowedValues.\\[(.*)].releaseDate","value.releaseDate"],[t("rkNR").Mc]:["allowedValues.\\[(.*)].releaseDate","value.\\[(.*)].releaseDate"],[t("rkNR").Gd]:["schema.renderer"],[t("rkNR").Td]:["autoCompleteUrl","value.\\[(.*)].goal","schema.renderer"],[t("rkNR").we]:L,[t("rkNR").xc]:L,[t("rkNR").Sc]:["value.data.keyNum","value.data.issueType.id","editable","value.nonEditableReason"],[t("rkNR").Vc]:["editable","required","title","value.fields.issuetype.avatarId","value.fields.issuetype.description","value.fields.issuetype.entityId","value.fields.assignee","value.fields.created","value.fields.priority","value.fields.updated","value.fields.status","value.fields.timetracking"],[t("rkNR").cd]:x,[t("rkNR").vd]:["value.\\[(.*)].key",...S],[t("rkNR").Yc]:S,
[t("rkNR").Hd]:["value.completedApprovals.\\[(.*)].createdDate.friendly","value.completedApprovals.\\[(.*)].createdDate.iso8601","value.completedApprovals.\\[(.*)].createdDate.jira","value.completedApprovals.\\[(.*)].completedDate.friendly","value.completedApprovals.\\[(.*)].completedDate.iso8601","value.completedApprovals.\\[(.*)].completedDate.jira","value.completedApprovals.\\[(.*)].approvers.\\[(.*)].approver.active","value.completedApprovals.\\[(.*)].approvers.\\[(.*)].approver.emailAddress","value.completedApprovals.\\[(.*)].approvers.\\[(.*)].approver.timeZone","value.completedApprovals.\\[(.*)].status.id","value.activeApproval.createdDate.friendly","value.activeApproval.createdDate.iso8601","value.activeApproval.createdDate.jira","value.activeApproval.status.id","value.activeApproval.approvers.\\[(.*)].approver.timeZone","value.activeApproval.approvers.\\[(.*)].approver.active","value.activeApproval.approvers.\\[(.*)].approver.emailAddress","value.activeApproval.decisions.\\[(.*)].approver.timeZone","value.activeApproval.decisions.\\[(.*)].approver.active","value.activeApproval.decisions.\\[(.*)].approver.emailAddress","value.activeApproval.excludedApprovers.\\[(.*)].timeZone"],
[t("rkNR").jd]:["value.avatarUrls.16x16","value.avatarUrls.24x24","value.avatarUrls.32x32","value.projectCategory","value.projectTypeKey","value.simplified","allowedValues","autoCompleteUrl"],[t("rkNR").Hb]:["value.issueTypes.\\[(.*)].avatarId","value.issueTypes.\\[(.*)].description","value.issueTypes.\\[(.*)].entityId"],[t("rkNR").Ib]:["value.issueTypes.\\[(.*)].avatarId","value.issueTypes.\\[(.*)].description","value.issueTypes.\\[(.*)].entityId"],[t("rkNR").Jb]:["value.issueTypes.\\[(.*)].avatarId","value.issueTypes.\\[(.*)].description","value.issueTypes.\\[(.*)].entityId"],[t("rkNR").kb]:U,[t("rkNR").me]:U,[t("rkNR").ke]:U,[t("rkNR").Xd]:["required"],[t("rkNR").fe]:["value.avatarUrl","value.name"],[t("rkNR").ee]:["value.avatarUrl","autoCompleteUrl","value.isShared","value.title"],[t("rkNR").De]:["title","value.hasVoted","value.votes"],[t("rkNR").Fe]:["title","value.isWatching","value.watchCount"]
},P=new RegExp(`^(.*).(${["data.issueLinks.linkedIssues.([^.]+).(issueLink|issuePriorityUrl|issueTypeIconUrl)","data.subtasks.([^.]+).issuePriorityUrl","data.childrenIssues.([^.]+).issuePriorityUrl"].join("|")})$`),q={[t("rkNR").m]:["autoCompleteUrl"],[t("rkNR").Hb]:["value.issueTypes.\\[(.*)].iconUrl"],[t("rkNR").Ib]:["value.issueTypes.\\[(.*)].iconUrl"],[t("rkNR").Jb]:["value.issueTypes.\\[(.*)].iconUrl"],[t("rkNR").cc]:["allowedValues.\\[(.*)].iconUrl","value.iconUrl"],[t("rkNR").uc]:["autoCompleteUrl"],[t("rkNR").tc]:["autoCompleteUrl"],[t("rkNR").Sc]:["value.data.issueType.iconUrl"],[t("rkNR").cd]:["value.\\[(.*)].fields.issuetype.iconUrl","value.\\[(.*)].fields.priority.iconUrl"],[t("rkNR").ed]:["value.iconUrl","allowedValues.\\[(.*)].iconUrl"],[t("rkNR").rd]:["autoCompleteUrl"],[t("rkNR").vd]:["autoCompleteUrl"],[t("rkNR").Ad]:["autoCompleteUrl"],[t("rkNR").Zd]:["value.\\[(.*)].fields.issuetype.iconUrl","value.\\[(.*)].fields.priority.iconUrl"],
[t("rkNR").we]:["autoCompleteUrl"],[t("rkNR").C]:["value.\\[(.*)].avatar.url48","value.\\[(.*)].attributes.\\[(.*)].objectAttributeValues.\\[(.*)].referencedObject.avatar.url48"]
},K=[t("rkNR").Yb,"self","renderedValue"],$=new RegExp(`^(.*).(${["fields.(?!com.atlassian.jira.plugins.cmdb:cmdb-object-cftype)[^.]+.configuration","issueLinks.linkedIssueKeys","issueLinks.linkedIssues.([^.]+).assigneeUrl","subtasks.\\[(.*)].assigneeUrl","subtasks.\\[(.*)].issueLink","subtasks.\\[(.*)].issueTimeTracking.originalEstimate","subtasks.\\[(.*)].issueTimeTracking.remainingEstimate","subtasks.\\[(.*)].issueTimeTracking.timeSpent","subtasks.\\[(.*)].assignee.avatarUrls.(.*)","childrenIssues.\\[(.*)].issueLink","childrenIssues.\\[(.*)].assigneeUrl","childrenIssues.\\[(.*)].issueTimeTracking.originalEstimate","childrenIssues.\\[(.*)].issueTimeTracking.remainingEstimate","childrenIssues.\\[(.*)].issueTimeTracking.timeSpent","issue.tabs","fields.statuscategorychangedate"].join("|")})$`),_=new RegExp(`^(.*).issue.fields.ari:cloud:ecosystem::extension/([^.]+).(${["schema.configuration","value.avatarUrls","value.\\[(.*)].avatarUrls","value.emailAddress","value.\\[(.*)].emailAddress","value.timeZone","value.\\[(.*)].timeZone","autoCompleteUrl"].join("|")})$`),G=(e,a)=>({
payloadNew:a,payloadOld:e.filter((e=>!e.archived))}),M={[t("rkNR").pb]:{propertyLocation:"allowedValues",key:"id"},[t("rkNR").b]:{propertyLocation:"allowedValues",key:"id"},[t("rkNR").j]:{propertyLocation:"value",key:"originId"},[t("rkNR").J]:{propertyLocation:"(value|allowedValues)",key:"id"},[t("rkNR").Qc]:{propertyLocation:"value",key:"id"},[t("rkNR").Kc]:{propertyLocation:"value",key:"accountId"},[t("rkNR").uc]:{propertyLocation:"value"},[t("rkNR").ed]:{propertyLocation:"allowedValues",key:"id"},[t("rkNR").Zd]:{propertyLocation:"value",key:"id"},[t("rkNR").Td]:{propertyLocation:"value",key:"id"},[t("rkNR").tc]:{propertyLocation:"value"},[t("rkNR").zd]:{propertyLocation:"allowedValues",key:"id"},[t("rkNR").Ae]:{propertyLocation:"allowedValues",key:"id",filter:G},[t("rkNR").Mc]:{propertyLocation:"allowedValues",key:"id",filter:G},[t("rkNR").bc]:{propertyLocation:"value.issuerestrictions.projectrole",key:"restrictionValue"},[t("rkNR").vd]:{propertyLocation:"value",key:"accountId",
filter:(e,a)=>{const t=e.map((e=>e.accountId));return{payloadOld:e,payloadNew:a.filter((e=>t.indexOf(e.accountId)>=0))}},shouldSkipLengthComparison:!0},[t("rkNR").Zc]:{propertyLocation:"value",key:"accountId"},[t("rkNR").i]:{propertyLocation:"value",key:"accountId"},[t("rkNR").z]:{propertyLocation:"value.\\[(.*)].fields",key:"key"},[t("rkNR").ib]:{propertyLocation:"(value|value.\\[(.*)].fields)",key:"key"},[t("rkNR").cd]:{propertyLocation:"(value|value.\\[(.*)].fields)",key:"key"},[t("rkNR").s]:{propertyLocation:"(allowedValues|allowedValues.\\[(.*)].children)",key:"id"},[t("rkNR").C]:{propertyLocation:"value.\\[(.*)].attributes",key:"id"},[t("rkNR").Hd]:{propertyLocation:"(value.completedApprovals.\\[(.*)].approvers|value.activeApproval.approvers|value.activeApproval.excludedApprovers)",key:"approver.accountId"},[t("rkNR").Yc]:{propertyLocation:"value",key:"accountId",shouldSkipLengthComparison:!0}
},J=[t("rkNR").Ae,t("rkNR").Mc,t("rkNR").pb,t("rkNR").b],Z=[t("rkNR").cd,t("rkNR").Zd],H=[t("rkNR").cc,t("rkNR").Wd,t("rkNR").R,t("rkNR").te,t("rkNR").xd,t("rkNR").Fe,t("rkNR").De,t("rkNR").Yb,t("rkNR").ae,t("rkNR").Xc,t("rkNR").qb,t("rkNR").Xd,t("rkNR").mb,t("rkNR").kb],Y=[t("rkNR").zd,t("rkNR").m,t("rkNR").rd,t("rkNR").Y,t("rkNR").gb],B=[t("rkNR").zd,t("rkNR").m,t("rkNR").rd,t("rkNR").Y,t("rkNR").se,t("rkNR").oe],X=[t("rkNR").wd,t("rkNR").ud,t("rkNR").Hd,t("rkNR").Ld,t("rkNR").Qc,t("rkNR").fd,t("rkNR").td,t("rkNR").sd,t("rkNR").Kd],z=[t("rkNR").bc,t("rkNR").Ed,t("rkNR").Wd,t("rkNR").R,t("rkNR").te,t("rkNR").xd,t("rkNR").cc,t("rkNR").Xc,t("rkNR").ae,t("rkNR").Fe,t("rkNR").De,t("rkNR").Zd,t("rkNR").Yb,t("rkNR").pd,t("rkNR").gb,t("rkNR").D,t("rkNR").ib,t("rkNR").z],Q=[t("rkNR").qb,t("rkNR").cd],ee=[t("rkNR").td,t("rkNR").Hd,t("rkNR").fd,t("rkNR").Kd,t("rkNR").Ld],ae=[t("rkNR").zd],te=["autoCompleteUrl","required"],ie=[t("rkNR").m,t("rkNR").rd,t("rkNR").we,t("rkNR").xc,t("rkNR").Kc,t("rkNR").i,t("rkNR").Zc,t("rkNR").Yc,t("rkNR").vd],le=[t("rkNR").m,t("rkNR").R,t("rkNR").cc,t("rkNR").ed,t("rkNR").Wd,t("rkNR").ae,t("rkNR").se,t("rkNR").te],re=[t("rkNR").Gc,t("rkNR").Ic],se=[t("rkNR").Md,t("rkNR").C],ne=[t("rkNR").vd],oe=[t("rkNR").z,t("rkNR").ib,t("rkNR").cd,t("rkNR").Zd],ue=[t("rkNR").Zd,t("rkNR").hb,t("rkNR").y,t("rkNR").bd],de=[t("rkNR").te,t("rkNR").Yc,t("rkNR").xc]
;let ce,ve;!function(e){e.ERROR="ERROR",e.WARNING="WARNING",e.IGNORE="IGNORE"}(ce||(ce={})),function(e){e.DATA_CORRUPTION="DATA_CORRUPTION",e.PERMISSION_ISSUE="PERMISSION_ISSUE"}(ve||(ve={}));new Set([...H,...Y,...B,...X]);const pe={version:1,type:"doc",content:[{type:"paragraph",content:[]}]},ke=e=>e.replace(/\./g,"-"),ye="Former user",fe=({schema:e})=>e.custom||e.system||e.type,ge=e=>"unknown"===(null==e?void 0:e.accountId)&&"unknown"===(null==e?void 0:e.accountType)&&!1===(null==e?void 0:e.active),Ne=e=>void 0!==(null==e?void 0:e.active),Re=e=>void 0!==(null==e?void 0:e.data),me=e=>{var a,t,i,l,r,s,n;return null==e||null===(a=e.data)||void 0===a||null===(t=a.issue)||void 0===t||null===(i=t.fields["servicedesk-approvals"])||void 0===i||null===(l=i.value)||void 0===l||null===(r=l.activeApproval)||void 0===r||null===(s=r.configuration)||void 0===s||null===(n=s.approvers)||void 0===n?void 0:n.customFieldId
},he=e=>void 0!==(null==e?void 0:e.schema),be=e=>void 0!==(null==e?void 0:e.released),we=(e,a)=>a?Object(t("4+6U").a)(e):e,Ce={},Ie=e=>Ce[e]||(e=>{const a=W[e];if(!a)return;const t=new RegExp(`^(.*).fields.${e}.(${a.join("|")})$`);return Ce[e]=t,t})(e);class Oe{constructor(){this.message=void 0,this.message="Location has been skipped"}skipAndIgnore(e){return{shouldSkip:!0,message:null!=e?e:this.message,inconsistencyLevel:ce.IGNORE}}skipAndWarn(e,a){return s()(s()(s()({},this.skipAndIgnore(e)),null!=a?a:{}),{},{inconsistencyLevel:ce.WARNING})}static doNotSkip(){return{shouldSkip:!1}}}const Ae=(e,a,i,l)=>{var r,s;const{currentNode:n,fieldType:u,isNotEditable:d,issueHierarchyLevel:c,isTeamManagedProject:v,shouldSkipValueForRichTextField:p,isArchivedVersionReleasedField:k}=a,y=new Oe;if(!0===p)return y.skipAndIgnore("Value field for a plain text field is expectedly inconsistent")
;if(!0===k&&J.some((a=>a===u&&(e.includes("value.")||e.includes("allowedValues.")))))return y.skipAndIgnore("released field in value or allowedValues in version related fields skipped if released & archived are true due to expected inconsistency");if(n&&K.includes(n))return y.skipAndIgnore();if(he(i)&&u){var f,g,N,R,m,h;if(A.some((e=>u.startsWith(e))))return y.skipAndIgnore();if(u===t("rkNR").C&&(!1===(null==i||null===(f=i.configuration)||void 0===f?void 0:f.wasInsightRequestSuccessful)||he(l)&&!1===(null==l||null===(g=l.configuration)||void 0===g?void 0:g.wasInsightRequestSuccessful)))return y.skipAndIgnore();if(de.includes(u)&&null!==(N=a.updatedDateInformation)&&void 0!==N&&N.areValidDates&&null!==(R=a.updatedDateInformation)&&void 0!==R&&R.isNotEqualAndUpdatedTooRecent)return y.skipAndWarn(`field: ${u} - Updated dates are different but still within limit.`);if(u===t("rkNR").u&&a.projectType!==t("JXwD").a)return y.skipAndIgnore();if(O.includes(u))return y.skipAndIgnore()
;const e=void 0===l,r=((e,{isTeamManagedProject:a,projectType:i})=>{if(H.includes(e))return!0;if(a){if(Y.includes(e))return!0}else if(B.includes(e))return!0;return!(i!==t("JXwD").g||!X.includes(e))})(u,a),s=((e,{projectType:a,isTeamManagedProject:i})=>!!(z.includes(e)||!i&&ae.includes(e)||a===t("JXwD").i&&Q.includes(e)||a===t("JXwD").g&&ee.includes(e)))(u,a),n=Boolean(null===(m=a.layoutFields)||void 0===m?void 0:m.includes(i.key)),o=Z.includes(u),d=(({customFieldIdApprovalJSM:e,customFieldKey:a,projectType:i})=>!(!e||i!==t("JXwD").g)&&e===a)(a);if(e&&u===t("rkNR").J&&a.isTeamManagedProject)return y.skipAndIgnore("No component field in TMP");if(e&&!n&&!s&&!o&&!d)return y.skipAndWarn("missing field is skipped as a warning",{isForcedField:r,isLayoutControlledFieldOnIssueLayout:n,isFixedLayoutField:s});if(e&&o&&0===(null===(h=i.value)||void 0===h?void 0:h.length))return y.skipAndIgnore("the field is skipped because legacy value is empty")
;if(u===t("rkNR").wd&&Boolean(a.validRequestTypeCustomFieldKey)&&i.key!==a.validRequestTypeCustomFieldKey)return y.skipAndIgnore("The field is skipped because the request type field is invalid")}if(u&&n){var b;if(!0===d&&te.includes(n))return y.skipAndIgnore(`Expectedly inconsistent ${n} skipped for '${u}' when editable property is false`);if("value"===n&&oe.includes(u)&&a.isChildrenIssueExceedingLimit)return y.skipAndIgnore("Skipping the associated issue field checks due to values exceeding the limit");if("value"===n&&!a.locale.startsWith("en")&&ie.includes(u)&&((e,a)=>!(!Ne(e)||!Ne(a)||!1!==e.active||!1!==a.active||e.displayName===a.displayName||a.displayName!==ye&&e.displayName!==ye))(i,l))return y.skipAndWarn("Skipping the translation for Former user on user related field values");const r=()=>"fields"===n&&he(i)&&i.schema.system===t("rkNR").m&&ge(i.value)
;if((()=>ie.includes(u)&&"value"===n&&ge(i))()||r())return y.skipAndIgnore("User data is expectedly inconsistent for deleted users");if((u===t("rkNR").Zd||u===t("rkNR").cd)&&"assignee"===n&&ge(i))return y.skipAndIgnore("User data is expectedly inconsistent for deleted users");if("adfValue"===n&&o()(i,pe)&&o()(l,Object(t("obX6").a)()))return y.skipAndIgnore();if(a.projectType!==t("JXwD").g&&ne.includes(u))return y.skipAndIgnore(`Expectedly inconsistent ${n} skipped for '${u}' when project type is not JSM`);if("allowedValues"===n&&!0===d&&Array.isArray(i)&&0===i.length&&Array.isArray(l))return y.skipAndIgnore("Fields allowedValues are expectedly inconsistent when the field is not editable");if(v&&"title"===n&&u===t("rkNR").i&&a&&(null==a||null===(b=a.layoutFields)||void 0===b||!b.includes((null==a?void 0:a.customFieldKey)||""))&&i!==l&&""===l)return y.skipAndIgnore();if(u===t("rkNR").Qc&&"value"===n&&null===i&&Array.isArray(l)&&0===l.length)return y.skipAndIgnore()
;if(u===t("rkNR").u&&e.endsWith("schema.custom")&&l===t("rkNR").Gd)return y.skipAndWarn("Skipping the category field check for the schema.custom due to the new value being a select field");if(se.includes(u)&&"value"===n&&Array.isArray(i)&&i.length>0&&(null===l||Array.isArray(l)&&i.length>l.length))return y.skipAndIgnore();if(re.includes(u)&&"value"===n&&Array.isArray(i)&&0===i.length&&null===l)return y.skipAndIgnore();if(!v&&(u===t("rkNR").Ic||u===t("rkNR").Gd)&&"allowedValues"===n&&Array.isArray(i)&&Array.isArray(l)&&i.length-l.length<3&&i.length!==l.length)return y.skipAndWarn(`typeOfOld was array length of ${i.length} but typeOfNew was array of length ${l.length} but still within the limit`);const s=Ie(u);if(s&&e.match(s))return y.skipAndIgnore();if(!v){if(c>=0&&e.endsWith("issue.fields.parent.value"))return y.skipAndIgnore();if(u===t("rkNR").bc)return y.skipAndIgnore()}if((e=>e.startsWith("ari:cloud:ecosystem::extension/"))(u)&&e.match(_))return y.skipAndIgnore()
;if((e=>["read-only-date-issue-field","read-only-number-issue-field","read-only-string-issue-field"].includes(e))(u)&&e.endsWith("schema.custom"))return y.skipAndIgnore()}if(e.startsWith("<root>.data.childrenIssues")||e.startsWith("<root>.data.subtasks")){if(a.isChildrenIssueExceedingLimit)return y.skipAndIgnore("Skipping the top-level children issues checks due to values exceeding the limit");if(e.endsWith("assigneeDisplayName")){var w,C,I,E,T,j;const t=null!==(w=null===(C=e.match(/\[(\d+)\]/))||void 0===C?void 0:C[1])&&void 0!==w?w:-1,i=a.rootPayloadOld&&Re(a.rootPayloadOld)?null===(I=a.rootPayloadOld)||void 0===I?void 0:I.data:null,l=e.startsWith("<root>.data.childrenIssues")?null==i?void 0:i.childrenIssues:null==i?void 0:i.subtasks,r=null==l?void 0:l[Number(t)];if(null!==(E=null===(T=a.associatedIssueKeysWithDeletedUser)||void 0===T?void 0:T.includes(null!==(j=null==r?void 0:r.issueKey)&&void 0!==j?j:""))&&void 0!==E&&E)return y.skipAndIgnore()}}
return e.startsWith("<root>.data.childrenIssues")&&void 0===i?y.skipAndIgnore():e.startsWith("<root>.data.updatedDate")&&null!==(r=a.updatedDateInformation)&&void 0!==r&&r.areValidDates&&null!==(s=a.updatedDateInformation)&&void 0!==s&&s.isNotEqualAndUpdatedTooRecent?y.skipAndWarn("field: updatedDate - Updated dates are different but still within limit."):u!==t("rkNR").wd||"value"!==n||!(e=>void 0!==(null==e?void 0:e.currentStatus))(i)||null!=i&&i.requestType||null!==l?e.match($)?y.skipAndIgnore():Oe.doNotSkip():y.skipAndIgnore()},Ee=(e,a)=>"object"==typeof a||["version","type",""].includes(e)?a:typeof a,Te=e=>{let a=JSON.stringify(e,Ee);return a.length>200&&(a=`${a.substring(0,199)}...`),a},je=["inconsistencyLevel","shouldSkip"],Le=t("RGCN").a.custom({key:"issue-agg-create-inconsistency-report"}),Se=e=>Date.now()>e.expiryTime||"visible"!==document.visibilityState,De=e=>void 0===e,Ue=(e,a,t,i,l,r={})=>{const n=null===t?"null":typeof t,o=null===i?"null":typeof i;return w()(s()(s()({
level:e,location:a,typeofOld:Array.isArray(t)?"array":n,typeofNew:Array.isArray(i)?"array":o,customFieldKey:l.customFieldKey},void 0!==l.isNotEditable?{isNotEditable:l.isNotEditable}:null),r),De)},Ve=(e,a,i="<root>",l,r=[],n=!0,u="recursion-call",d="<root>")=>{let c=r,v=n,p=u,k=d;if(Se(l))return{wasCompleted:!1,inconsistencies:c,lastCheckLocation:p,lastPayloadLocation:k};const y=Ae(i,l,e,a);if(y.shouldSkip){const{inconsistencyLevel:t,shouldSkip:r}=y,s=R()(y,je);return c.push(Ue(t,i,e,a,l,s)),{wasCompleted:v,inconsistencies:c,lastCheckLocation:"should-skip-location",lastPayloadLocation:k}}if(Se(l))return{wasCompleted:!1,inconsistencies:c,lastCheckLocation:"should-skip-location",lastPayloadLocation:k};if(null===e&&null===a);else if(null===e&&null!==a)c.push(Ue(ce.ERROR,i,e,a,l,s()({},Array.isArray(a)&&{message:`typeofOld was null but typeofNew was array of length ${a.length}`})));else if(null===a&&null!==e){const r={}
;((e,a,i)=>e.fieldType===t("rkNR").wd&&"value"===e.currentNode&&null!=(null==a?void 0:a.errorMessage)&&"string"==typeof a.errorMessage&&null===i)(l,e,a)?r.message=ve.DATA_CORRUPTION:Array.isArray(e)&&(r.message=`typeofOld was array of length ${e.length} but typeofNew was null`),c.push(Ue(ce.ERROR,i,e,a,l,r))}else if(Array.isArray(e))if(Array.isArray(a)){let r={wasCompleted:v,inconsistencies:[],lastCheckLocation:"array",lastPayloadLocation:k},s=e;e.length>a.length&&(e=>!e.isTeamManagedProject&&e.issueHierarchyLevel===t("EjZa").b&&!e.isChildrenIssueExceedingLimit&&((null==e?void 0:e.fieldType)===t("rkNR").ib&&"value"===e.currentNode||"childrenIssues"===e.currentNode))(l)&&(s=((e,a)=>{const i=[];var l,r,s;e.rootPayloadOld&&Re(e.rootPayloadOld)&&(null===(l=e.rootPayloadOld)||void 0===l||null===(r=l.data)||void 0===r||null===(s=r.issue.fields[t("rkNR").hb])||void 0===s?void 0:s.value).forEach(((e,l)=>{e.fields.some((e=>{var a
;return(null===(a=e.schema)||void 0===a?void 0:a.system)===t("rkNR").cc&&e.value.hierarchyLevel!==t("EjZa").b}))&&i.push(a[l])}));return i})(l,e));let n=s,o=a;(e=>"fields"===e.currentNode&&e.fieldType&&oe.includes(e.fieldType))(l)&&(n=n.filter((e=>le.includes(e.key))),o=o.filter((e=>n.some((({key:a})=>a===e.key)))),n.length===s.length&&o.length===a.length||c.push({level:ce.IGNORE,location:i,typeofOld:"array",typeofNew:"array",customFieldKey:l.customFieldKey,message:"Filtering and skipping optional fields in children issues"}));const{key:u,shouldIgnoreOrder:d,shouldSkipLengthComparison:y,filter:f}=((e,a)=>{if(!a.isTeamManagedProject&&("<root>.data.subtasks"===e||"<root>.data.childrenIssues"===e))return{key:"id",shouldIgnoreOrder:!0};const{fieldType:t}=a;if(!t)return{};if((e=>e.startsWith("com.atlassian.plugins.atlassian-connect-plugin:"))(t)&&e.endsWith(".value"))return{key:"id",shouldIgnoreOrder:!0};const i=M[t];if(!i)return{}
;const{key:l,filter:r,shouldSkipLengthComparison:s,propertyLocation:n}=i;return e.match(`${ke(t)}.${n}$`)?{key:l,filter:r,shouldIgnoreOrder:!0,shouldSkipLengthComparison:!!s}:{}})(i,l);if(f){const{payloadNew:e,payloadOld:a}=f(n,o);n=a,o=e}d&&c.push({level:ce.IGNORE,location:i,typeofOld:"array",typeofNew:"array",customFieldKey:l.customFieldKey,message:"Ignoring the order of the values"});const g=d?I()(n,[u]):n,N=d?I()(o,[u]):o;if(g.length===N.length||y)for(let e=0;e<Math.min(g.length,10);e+=1){const a=`${i}.[${e}]`;if(Date.now()>l.expiryTime){r.wasCompleted=!1,r.lastPayloadLocation=a;break}if(r.inconsistencies.filter((({level:e})=>e===ce.ERROR)).length>=10)break;r=Ve(g[e],N[e],a,l,r.inconsistencies,v,"array",a)}else{const e=Ue(ce.ERROR,i,s,a,l,{message:`typeofOld was array of length ${s.length} but typeofNew was array of length ${a.length}`});r.inconsistencies=r.inconsistencies.concat(e)}v=r.wasCompleted,p=r.lastCheckLocation,k=r.lastPayloadLocation,c=c.concat(r.inconsistencies)
}else Ue(ce.ERROR,i,e,a,l);else if("object"!=typeof e||Object(t("Se/U").a)(e)||null===e)if(((e,a)=>{var t;if(e.match(P))return!0;const{fieldType:i=""}=a;return null===(t=q[i])||void 0===t?void 0:t.some((a=>e.match(`^(.*).fields.${i}.${a}$`)))})(i,l)&&"string"==typeof e&&"string"==typeof a){const t=(t,r)=>{c.push(Ue(t,i,e,a,l,{message:r}))},r="https://jira-dev.com",s=(e=>{let a;try{a=decodeURI(e)}catch(t){a=e}return a})(a);let n,o;try{n=new URL(e,r)}catch(f){if(e!==s){t(ce.WARNING,"Bad payloadOld URL value and not the same with payloadNew URL");try{o=new URL(s,r)}catch(g){t(ce.WARNING,"Bad payloadNew URL value")}}else t(ce.IGNORE,"Bad payloadOld URL value and the same with payloadNew URL");return{wasCompleted:v,inconsistencies:c,lastCheckLocation:"url",lastPayloadLocation:k}}try{o=new URL(s,r)}catch(f){return t(ce.WARNING,"Bad payloadNew URL value"),{wasCompleted:v,inconsistencies:c,lastCheckLocation:"url",lastPayloadLocation:k}}
const u=n.pathname===o.pathname,d=n.search===o.search,p=n.origin===o.origin,y=(n.origin===r||o.origin===r)&&u||p&&u;y&&d?t(ce.IGNORE,"URLs with the same pathname and parameter string"):y&&!d?t(ce.ERROR,"URLs with the same pathname but different parameter strings"):n.href!==o.href&&t(ce.ERROR,"Two different URLs")}else{const r=!o()(e,a);if(Se(l))v=!1,p="object";else if(r){const r=(t={})=>{c.push(Ue(ce.ERROR,i,e,a,l,t))},s="string"==typeof e&&"string"==typeof a,n="object"==typeof e&&"object"==typeof a&&Object(t("Se/U").a)(e)&&Object(t("Se/U").a)(a);if(s||n){const o=we(e,s),u=we(a,s);Object(t("Se/U").a)(o)&&Object(t("Se/U").a)(u)?0===Object(t("JhOC").a)(o,u)?c.push(Ue(ce.IGNORE,i,e,a,l,{message:`Differing ${n?"date objects":"strings"} evaluated to dates and the timestamps were equivalent`})):c.push(Ue(ce.ERROR,i,e,a,l,{message:`Differing ${n?"date objects":"strings"} evaluated to dates but were still differing timestamps`})):r()
}else((e,a,i)=>e.fieldType===t("rkNR").wd&&"errorMessage"===e.currentNode&&"string"==typeof a&&void 0===i)(l,e,a)?r({message:ve.PERMISSION_ISSUE}):r()}}else if("object"!=typeof a||null===a)c.push(Ue(ce.ERROR,i,e,a,l));else if(i.endsWith("adfValue")){const r=!h()(e,a,((e,a)=>{if("string"==typeof e&&"string"==typeof a&&"@User"===a)return c.push({level:ce.IGNORE,location:i,typeofOld:"string",typeofNew:"string",customFieldKey:l.customFieldKey,message:"Ignore mentions of deleted users in ADF values"}),!0}));if(Se(l))v=!1,p="adf-value",k=i;else if(r){const r=Object(t("obX6").a)(),s=o()(e,r),n=o()(a,r);if(s||n){const t=s?`Old ADF value is empty and new ADF value: ${Te(a)}`:`New ADF value is empty and old ADF value: ${Te(e)}`;c.push(Ue(ce.ERROR,i,e,a,l,{message:t}))}else c.push(Ue(ce.ERROR,i,e,a,l,{message:"ADF values are inconsistent"}))}}else{he(e)&&he(a)&&(l.isNotEditable=!1===e.editable,
l.shouldSkipValueForRichTextField=e.schema.renderer===t("SIWb").c&&(e.schema.system===t("rkNR").fb||e.schema.custom===t("rkNR").je));const r=Object.entries(e);let n={wasCompleted:v,inconsistencies:[],lastCheckLocation:"object-field",lastPayloadLocation:i};for(let o=0;o<r.length;o+=1){const[u,d]=r[o];let c=u;const p=a[u];if(he(d)){const e=fe(d),i=0===u.indexOf("customfield_");if(c=ke(e),l.customFieldKey=i?u:"",l.fieldType=e,e===t("rkNR").wd&&!l.validRequestTypeCustomFieldKey){const e=Object.values(a).find((e=>e.schema.custom===t("rkNR").wd));e&&(l.validRequestTypeCustomFieldKey=e.key)}}const k=`${i}.${c}`;if(Se(l)){n.wasCompleted=!1,n.lastPayloadLocation=k;break}l.isArchivedVersionReleasedField=be(e)&&"released"===u&&!0===e.archived,n=Ve(d,p,k,s()(s()({},l),{},{currentNode:c}),n.inconsistencies,v,"object-field",k)}v=n.wasCompleted,p=n.lastCheckLocation,k=n.lastPayloadLocation,c=c.concat(n.inconsistencies)}return{inconsistencies:c,wasCompleted:v,lastCheckLocation:p,lastPayloadLocation:k}
},Fe=(e,a)=>{if(e)try{var t;return JSON.parse(String(null==e||null===(t=e.inconsistencyLog)||void 0===t?void 0:t[a]))||[]}catch{return[]}},xe=(e,a,i,l=(()=>({currentNode:"",customFieldKey:"",isTeamManagedProject:!1,issueHierarchyLevel:0,expiryTime:Date.now()+500,locale:t("vJdW").b}))(),r)=>{const n="<root>",{inconsistencies:u,lastCheckLocation:d,lastPayloadLocation:c,wasCompleted:v}=Ve(a,i,n,s()(s()({},l),{},{rootPayloadOld:a}));if(!r){const t=u.filter((({level:e})=>e===ce.ERROR)),r=u.filter((({level:e})=>e===ce.WARNING));return 0===u.length&&v&&t.push(Ue(ce.ERROR,n,a,i,l,{message:"newValue has something that oldValue does not or an unexpected inconsistency"})),{featureFlagName:e.featureFlagName,featureFlagValue:e.value,inconsistencies:t,warnings:r,lastCheckLocation:d,lastPayloadLocation:c,wasCompleted:v}}
const p=Fe(r,"inconsistencies"),k=null==p?void 0:p.map((e=>e.location)),y=u.filter((({level:e})=>e===ce.ERROR)).filter((e=>null==p?void 0:p.find((a=>o()(a,e))))),f=Fe(r,"warnings"),g=u.filter((({level:e})=>e===ce.WARNING)).filter((e=>null==f?void 0:f.find((a=>o()(a,e)))));return 0===u.length&&v&&y.push(Ue(ce.ERROR,n,a,i,l,{message:"newValue has something that oldValue does not or an unexpected inconsistency"})),{featureFlagName:e.featureFlagName,featureFlagValue:e.value,prevInconsistencyLocations:k,inconsistencies:y,warnings:g,lastCheckLocation:d,lastPayloadLocation:c,wasCompleted:v}},We=(e,a,i=t("vJdW").b)=>function(l,r,n){let o;try{var u,d,c,v,p,k,y,f;Object(t("xO1w").a)()&&Le.start();const{isChildrenIssueExceedingLimit:g,associatedIssueKeysWithDeletedUser:N}=((e,a)=>{let i=!1,l=[];return ue.forEach((r=>{var s,n;const o=((null===(s=a.data)||void 0===s?void 0:s.issue.fields)||{})[r],u=((null===(n=e.data)||void 0===n?void 0:n.issue.fields)||{})[r];let d=[]
;null!=o&&o.issueLimitUrl&&(i=!0),!i&&u&&(d=r===t("rkNR").Zd||r===t("rkNR").bd?u.value.filter((e=>{var a;return!(null===(a=e.fields)||void 0===a||!a.assignee)&&ge(e.fields.assignee)})):u.value.filter((e=>{const a=e.fields.find((e=>e.schema.system===t("rkNR").m));return!!a&&ge(a.value)}))),l=[...l,...d.map((e=>e.key))]})),{associatedIssueKeysWithDeletedUser:l,isChildrenIssueExceedingLimit:i}})(r,n),R=((e,a)=>{var i,l;const r=we((null===(i=e.data)||void 0===i?void 0:i.updatedDate)||"",!0),s=we((null===(l=a.data)||void 0===l?void 0:l.updatedDate)||"",!0),n=Date.now();if(!Object(t("Se/U").a)(r)||!Object(t("Se/U").a)(s))return{areValidDates:!1};const o=0===Object(t("JhOC").a)(r,s),u=n-1e4,d=Object(t("YTra").a)(r,{start:u,end:n}),c=Object(t("YTra").a)(s,{start:u,end:n});return{areValidDates:!0,isNotEqualAndUpdatedTooRecent:!o&&(d||c),msSinceOld:n-r.getTime(),msSinceNew:n-s.getTime(),oldAndNewMsDifference:Math.abs(r.getTime()-s.getTime())}})(r,n),m=xe(l,r,n,{currentNode:"",
isTeamManagedProject:Boolean(null==r||null===(u=r.data)||void 0===u||null===(d=u.project)||void 0===d?void 0:d.isSimplified),issueHierarchyLevel:null!==(c=null===(v=r.data)||void 0===v||null===(p=v.issue.fields.issuetype)||void 0===p||null===(k=p.value)||void 0===k?void 0:k.hierarchyLevel)&&void 0!==c?c:0,expiryTime:Date.now()+500,layoutFields:e,projectType:null==r||null===(y=r.data)||void 0===y||null===(f=y.project)||void 0===f?void 0:f.projectType,isChildrenIssueExceedingLimit:g,updatedDateInformation:R,locale:i,associatedIssueKeysWithDeletedUser:N,customFieldIdApprovalJSM:me(r)},a);Le.stop();const{start:h,stop:b}=Le.getData(),w=((e,a)=>{var t,i,l,r,s,n,o,u,d,c,v,p,k,y,f,g,N,R,m,h,b,w,C,I,O,A,E,T,j,L,S,D,U;const V=Array.from(new Set(Object.values((null==e||null===(t=e.data)||void 0===t||null===(i=t.issue)||void 0===i?void 0:i.fields)||{}).map(fe))).sort();return{issueIdOld:(null===(l=e.data)||void 0===l||null===(r=l.issue)||void 0===r?void 0:r.id)||"unknown issue id",
issueIdNew:(null===(s=a.data)||void 0===s||null===(n=s.issue)||void 0===n?void 0:n.id)||"unknown issue id",fieldCountOld:Object.keys((null===(o=e.data)||void 0===o||null===(u=o.issue)||void 0===u?void 0:u.fields)||{}).length,fieldCountNew:Object.keys((null===(d=a.data)||void 0===d||null===(c=d.issue)||void 0===c?void 0:c.fields)||{}).length,fieldTypesOld:V,linkedIssuesCountOld:null===(v=e.data)||void 0===v||null===(p=v.issueLinks)||void 0===p||null===(k=p.linkedIssueKeys)||void 0===k?void 0:k.length,linkedIssuesCountNew:null===(y=a.data)||void 0===y||null===(f=y.issueLinks)||void 0===f||null===(g=f.linkedIssueKeys)||void 0===g?void 0:g.length,childrenIssuesCountOld:null===(N=e.data)||void 0===N||null===(R=N.childrenIssues)||void 0===R?void 0:R.length,childrenIssuesCountNew:null===(m=a.data)||void 0===m||null===(h=m.childrenIssues)||void 0===h?void 0:h.length,subtasksCountOld:null===(b=e.data)||void 0===b||null===(w=b.subtasks)||void 0===w?void 0:w.length,
subtasksCountNew:null===(C=a.data)||void 0===C||null===(I=C.subtasks)||void 0===I?void 0:I.length,projectId:null!==(O=null===(A=e.data)||void 0===A||null===(E=A.project)||void 0===E?void 0:E.projectId)&&void 0!==O?O:null,projectType:null!==(T=null===(j=e.data)||void 0===j||null===(L=j.project)||void 0===L?void 0:L.projectType)&&void 0!==T?T:null,isTeamManagedProject:null!==(S=null===(D=e.data)||void 0===D||null===(U=D.project)||void 0===U?void 0:U.isSimplified)&&void 0!==S?S:null}})(r,n);o={featureFlagName:m.featureFlagName,featureFlagValue:m.featureFlagValue,context:JSON.stringify(s()(s()({},w),{},{inconsistencyCount:m.inconsistencies.length,duration:b&&h?b-h:null,lastCheckLocation:m.lastCheckLocation,lastPayloadLocation:m.lastPayloadLocation,wasCompleted:m.wasCompleted,prevInconsistencyLocations:m.prevInconsistencyLocations,updatedDateInformation:R,locale:i})),inconsistencies:JSON.stringify(m.inconsistencies),warnings:JSON.stringify(m.warnings)}}catch(g){throw Le.cancel(),g}return o}
;const Pe=()=>f[(()=>Object(t("0zaF").c)("issue.details.bento-10663-agg-shadow-read-delay",y.TenSeconds,Object.keys(f)))()||"TEN_SECONDS"],qe="issue.agg-shadow-read",Ke="issue-view-agg-migration-data-consistency-check",$e="issue-view-secondary-agg-migration-data-consistency-check";let _e=5;const Ge=()=>!1;a.default=({getLegacyGraphQlData:e})=>{const a=Object(t("gZwB").i)(),r=Object(t("EPof").a)(),s=Object(l.useRelayEnvironment)(),n=Object(t("TUFe").a)(),o=Object(t("DCdr").b)(Ke),u=Object(t("DCdr").b)($e),d=Object(t("gZwB").j)(),[,v]=Object(t("gZwB").g)(),{rolloutWithConsistencyCheckControlledBy:y}=(()=>({rolloutWithConsistencyCheckControlledBy:e=>({replacing:a=>({withNewCode:t=>({usingDefaultConsistencyCheckConfiguration:()=>({execute:()=>p(e,a,t,{areValuesEqual:k,inCaseOfInconsistencyLog:c})}),usingConsistencyCheckConfiguration:i=>({execute:()=>p(e,a,t,i)})})})})}))(),[{issueLayoutFields:f}]="CHECK"===o.value?Object(t("a/PP").a)():[{issueLayoutFields:void 0
}],N=Object(i.useCallback)((async()=>{try{return await Object(t("6KMO").a)(a,r,s)}catch(e){return e instanceof Error&&t("Ltg2").a.safeErrorWithoutCustomerData(qe,"ERROR: issueAggQuery SHADOW READ",e),null}}),[r,s,a]),R=Object(i.useCallback)((async()=>{var e,a,i,l,r;const s=await N();var n,o,u,d,c,v;if(null==s||null===(e=s.data)||void 0===e||null===(a=e.jira)||void 0===a||!a.issueByKey||!0===(null==s||null===(i=s.data)||void 0===i||null===(l=i.jira)||void 0===l?void 0:l.issueByKey.errorRetrievingData)||null!=s&&null!==(r=s.errors)&&void 0!==r&&r.length)throw t("Ltg2").a.safeInfoWithoutCustomerData(qe,"INFO: Aborting consistency check due to errors or missing data in AGG response",{issueByKey:null!=s&&null!==(n=s.data)&&void 0!==n&&null!==(o=n.jira)&&void 0!==o&&o.issueByKey?"present":"missing",errorRetrievingData:!0===(null==s||null===(u=s.data)||void 0===u||null===(d=u.jira)||void 0===d||null===(c=d.issueByKey)||void 0===c?void 0:c.errorRetrievingData),
errorCount:null==s||null===(v=s.errors)||void 0===v?void 0:v.length}),new Error("Issue AGG data contained errors or missing data");return{data:Object(t("OO3T").b)(s.data)}}),[N]),m=async(e,a,t,i)=>{if(!y||"CHECK"!==e.value)return null;const l={areValuesEqual:Ge,inCaseOfInconsistencyLog:i};try{return await y(e).replacing(a).withNewCode(t).usingConsistencyCheckConfiguration(l).execute()}catch(r){return null}},h=async()=>{if(!d||!f)return;const a=await m(o,(()=>Promise.resolve({data:d})),R,We(f,null,n));if(null==v||v.mergeIssueContext({legacyGraphqlResponse:void 0}),"CHECK"===u.value&&(e=>{if(null==e||!e.inconsistencyLog)return!1;try{var a;const t=JSON.parse(String(null==e||null===(a=e.inconsistencyLog)||void 0===a?void 0:a.inconsistencies));return(null==t?void 0:t.length)>0}catch{return!1}})(a)){const t=async()=>({data:await e()});await m(u,t,R,We(f,a,n))}};return Object(i.useEffect)((()=>{
if((()=>Object(t("0zaF").a)("issue-details-agg-migration-legacy-graphql-tti_l9w8f",!1))()||!g()&&"CHECK"!==o.value||!(()=>{try{var e,a,t,i;return((null===(e=window)||void 0===e||null===(a=e.navigator)||void 0===a?void 0:a.hardwareConcurrency)||0)>4&&((null===(t=window)||void 0===t||null===(i=t.navigator)||void 0===i?void 0:i.deviceMemory)||0)>4}catch(l){return!1}})())return()=>{};const e=setTimeout((()=>{if(_e>0){if(_e-=1,g()&&"CHECK"!==o.value)return void N();"CHECK"===o.value&&h()}}),Pe());return()=>{clearTimeout(e)}}),[d,f]),null}},tq0P:function(e,a,t){var i=t("wF/u");e.exports=function(e,a,t){var l=(t="function"==typeof t?t:void 0)?t(e,a):void 0;return void 0===l?i(e,a,void 0,t):!!l}},xweI:function(e,a,t){var i=t("XGnz"),l=t("alwl"),r=t("EA7m"),s=t("mv/X"),n=r((function(e,a){if(null==e)return[];var t=a.length;return t>1&&s(e,a[0],a[1])?a=[]:t>2&&s(a[0],a[1],a[2])&&(a=[a[0]]),l(e,i(a,1),[])}));e.exports=n},yue5:function(e,a,t){var i=t("/9aa");e.exports=function(e,a){if(e!==a){
var t=void 0!==e,l=null===e,r=e==e,s=i(e),n=void 0!==a,o=null===a,u=a==a,d=i(a);if(!o&&!d&&!s&&e>a||s&&n&&u&&!o&&!d||l&&n&&u||!t&&u||!r)return 1;if(!l&&!s&&!d&&e<a||d&&t&&r&&!l&&!s||o&&t&&r||!n&&r||!u)return-1}return 0}}}]);try{window.__jsEvalStop("async-issue-details-agg-shadow-read.js")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-source-maps/assets/async-issue-details-agg-shadow-read.e279c6a64635548e96e2.8.js.map