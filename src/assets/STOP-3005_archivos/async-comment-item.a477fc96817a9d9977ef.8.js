try{window.performance.mark("async-comment-item.js:eval-start")}catch(e){}(window.webpackJsonp=window.webpackJsonp||[]).push([["async-comment-item"],{AZNf:function(e,t,n){"use strict";var a=n("q1tI");const i=Object(n("AeFk").css)({color:"var(--ds-text-subtlest, #6B778C)"}),s="@atlaskit/comment",o="10.6.1";class r extends a.Component{render(){const{children:e,onFocus:t,onMouseOver:a}=this.props;return Object(n("AeFk").jsx)("span",{css:i,onFocus:t,onMouseOver:a},e)}}r.displayName="Edited";const c=Object(n("qgDP").a)("atlaskit");t.a=Object(n("ibeh").a)({componentName:"commentEdited",packageName:s,packageVersion:o})(Object(n("VHV8").a)({onClick:c({action:"clicked",actionSubject:"commentEdited",attributes:{componentName:"commentEdited",packageName:s,packageVersion:o}})})(r))},XPTl:function(e,t,n){"use strict";var a=n("pVnL"),i=n.n(a),s=n("q1tI"),o=n.n(s);const r=Object(n("AeFk").css)({marginTop:Object(n("7w+A").gridSize)()/2+"px",color:"var(--ds-text, #172B4D)"}),c=Object(n("AeFk").css)({
color:"var(--ds-text-disabled, rgba(9, 30, 66, 0.54))"});var d=({isDisabled:e,testId:t,children:a})=>Object(n("AeFk").jsx)("div",{"data-testid":t,css:[r,e&&c]},a);const l=Object(n("AeFk").css)({display:"flex",color:"var(--ds-text-subtle, #42526E)","& + &::before":{display:"inline-block",width:`${n("wp/Q").a}px`,color:"var(--ds-text-subtle, #42526E)",content:'"\xb7"',textAlign:"center",verticalAlign:"middle"}}),m={name:"13vjjlj",styles:"padding-right:8px"},u=Object(n("AeFk").css)({display:"flex",marginTop:3*Object(n("7w+A").gridSize)()/4,alignItems:"center",flexWrap:"wrap"});var p=({actions:e=[],errorActions:t=[],errorIconLabel:a,isError:i,isSaving:s,testId:o})=>{if(s||!e&&!t)return null;const r=i?t:e;return Object(n("AeFk").jsx)("div",{"data-testid":o,css:u},i?Object(n("AeFk").jsx)("span",{css:m},Object(n("AeFk").jsx)(n.n(n("DWq1")).a,{primaryColor:"var(--ds-text-warning, #FF8B00)",label:a||""})):null,r.map(((e,t)=>Object(n("AeFk").jsx)("div",{css:l,key:t},e))))};const h={
name:"1r5gb7q",styles:"display:inline-block"},g=Object(n("AeFk").css)({display:"flex",gap:Object(n("7w+A").gridSize)()}),b=Object(n("AeFk").css)({display:"flex",alignItems:"baseline",gap:Object(n("7w+A").gridSize)()/2+"px",color:"var(--ds-text-subtlest, rgba(9, 30, 66, 0.54))"}),f=({children:e})=>Object(n("AeFk").jsx)("div",{css:b},"\u2022",Object(n("AeFk").jsx)(n.n(n("ncU9")).a,{label:"",size:"small"}),e);var v=({author:e,edited:t,isError:a,isSaving:s,restrictedTo:o,savingText:r,time:c,testId:d,type:l,headingLevel:m})=>{const u=o?Object(n("AeFk").jsx)(f,null,o):null,p=[e||null,l?Object(n("AeFk").jsx)(n("EFQh").a,{testId:d&&`${d}-type`},l):null,!c||s||a?null:c,t||null,s?r:null,u].filter((e=>!!e)).map(((e,t)=>Object(n("AeFk").jsx)("div",{css:h,key:t},e))),b=m&&{role:"heading","aria-level":Number(m)};return p.length?Object(n("AeFk").jsx)("div",i()({"data-testid":d,css:g},b),p):null}
;t.a=({actions:e=[],restrictedTo:t="",highlighted:a=!1,isSaving:s=!1,savingText:r="Sending...",isError:c=!1,errorActions:l=[],errorIconLabel:m="",author:u,avatar:h,children:g,content:b,edited:f,time:E,type:y,testId:C,id:j,afterContent:k,shouldRenderNestedCommentsInline:O,headingLevel:A})=>{const x={author:u,edited:f,isError:c,isSaving:s,restrictedTo:t,savingText:r,time:E,type:y,headingLevel:A},I={actions:e,errorActions:l,errorIconLabel:m,isError:c,isSaving:s},S=o.a.createElement("div",null,o.a.createElement(v,i()({testId:C&&`${C}-header`},x)),o.a.createElement(d,{testId:C&&`${C}-content`,isDisabled:s||c},b),o.a.createElement(p,i()({testId:C&&`${C}-footer`},I)),k);return o.a.createElement(n("YkG3").a,{testId:C,shouldRenderNestedCommentsInline:O,id:j,avatar:h,content:S,highlighted:a},g)}},YkG3:function(e,t,n){"use strict";const a=Object(n("7w+A").gridSize)(),i={name:"icu4l4",styles:"grid-area:avatar-area"},s=Object(n("AeFk").css)({
gridTemplate:'\n  "avatar-area comment-area"\n  "nested-comments-area nested-comments-area"\n  / auto 1fr'}),o=Object(n("AeFk").css)({display:"grid",paddingTop:`${n("wp/Q").b}px`,position:"relative",gap:`${a}px`,gridTemplate:'"avatar-area comment-area"     ". nested-comments-area"\n    / auto 1fr',"&:first-child, &:first-of-type":{paddingTop:0}}),r=Object(n("AeFk").css)({minWidth:0,marginTop:a/4+"px",gridArea:"comment-area",wordWrap:"break-word"}),c=Object(n("AeFk").css)({width:"100%",height:"100%",padding:`${a}px ${a}px ${a/2}px`,background:"var(--ds-background-neutral, rgba(9, 30, 66, 0.04))",gridArea:"1 / 1 / 2 / 3",pointerEvents:"none",transform:`translate(-${a}px, -${a}px)`,'[dir="rtl"] &':{transform:`translate(${a}px, -${a}px)`}}),d=Object(n("AeFk").css)({marginTop:`${n("wp/Q").b}px`,gridArea:"nested-comments-area"});t.a=({content:e,children:t,highlighted:a,id:l,shouldRenderNestedCommentsInline:m,testId:u,avatar:p})=>Object(n("AeFk").jsx)("div",{css:[o,m&&s],"data-testid":u,id:l
},p&&Object(n("AeFk").jsx)("div",{css:i},p),Object(n("AeFk").jsx)("div",{css:r},e),t&&Object(n("AeFk").jsx)("div",{css:d},t),a&&Object(n("AeFk").jsx)("div",{css:c}))},ZFf7:function(e,t,n){"use strict";n.r(t);var a=n("pVnL"),i=n.n(a),s=n("q1tI"),o=n.n(s),r=n("vN+2"),c=n.n(r),d=n("DTaC");const l=({adf:e})=>{const[{mentionProvider:t,contextIdentifier:a,mediaContext:i}]=Object(n("g2hJ").d)();return t&&a&&i?o.a.createElement(n("uA9N").a,{adf:e,mentionProvider:t,contextIdentifier:a,mediaContext:i}):null};l.displayName="ConnectedRenderer";var m=l;const u=Object(d.j)((()=>Promise.all([n.e("vendor~d0ae3f07"),n.e("vendor~31ecd969"),n.e("vendor~1f20a385"),n.e("async-editor-view")]).then(n.bind(null,"WjMa"))),{moduleId:"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/content/comment-editor/index.tsx"});class p extends s.Component{constructor(...e){super(...e),this.getEditValue=()=>this.props.draftValue||this.props.bodyAdf,this.renderEditor=()=>{const e=o.a.createElement(m,{
adf:this.props.bodyAdf}),t={isExpanded:!0,isExpandedByDefault:!0,shouldFocus:!0,defaultValue:this.getEditValue(),secondaryToolbarComponents:this.props.secondaryToolbarComponents,onBlur:this.props.onBlur,onSave:this.props.onSave,onCancel:this.props.onCancel,onChange:this.props.onChange,onPaste:this.props.onPaste,onHideSave:this.props.onHideSave},a=o.a.createElement(n("Adn3").a,{packageName:"issue",fallback:e},o.a.createElement(u,t));return this.props.isServiceDesk?o.a.createElement(n("Hju2").a,{isExpanded:!0,commentId:this.props.commentId},a):a}}render(){return o.a.createElement(n("XeTR").a,null,this.props.isEditing?this.renderEditor():o.a.createElement(m,{adf:this.props.bodyAdf}))}}p.displayName="CommentContent",p.displayName="CommentContent",p.defaultProps={isServiceDesk:!1,onBlur:c.a,onSave:c.a,onCancel:c.a,onChange:c.a,onPaste:c.a,onHideSave:c.a};const h=e=>{const[{projectType:t}]=Object(n("g2hJ").c)();return n("g2hJ").c?o.a.createElement(p,i()({},e,{isServiceDesk:t===n("JXwD").g
})):null};h.displayName="ConnectedCommentContent";t.default=h},g2hJ:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return h}));var a=n("vN+2"),i=n.n(a),s=n("3tO9"),o=n.n(s);const r={setContextState:e=>({setState:t,getState:n})=>{t(o()(o()({},n()),{},{context:e}))},setEditorState:e=>({setState:t,getState:n})=>{t(o()(o()({},n()),{},{editor:e}))},setReactionsState:e=>({setState:t,getState:n})=>{t(o()(o()({},n()),{},{reactions:e}))}},c={context:{issueAri:null,commentAri:null,projectType:null},editor:{contextIdentifier:null,mentionProvider:null,getEncodedMention:()=>"",activityProvider:null,mediaContext:null,sharedAtTimestamp:null,sharedValue:void 0,onEditorExpandedFailure:i.a,onEditorSaveFailure:i.a,onEditorClearSharedValues:i.a},reactions:{isActive:!1}},d=Object(n("0b8M").a)({name:"issue-comment",initialState:c,actions:r}),l=Object(n("dq9g").b)(d,{
selector:e=>e.context}),m=Object(n("dq9g").b)(d,{selector:e=>e.editor}),u=Object(n("dq9g").b)(d,{selector:e=>e.reactions}),p=Object(n("dq9g").b)(d,{selector:null}),h=Object(n("UCyb").a)(d)},n4RG:function(e,t,n){"use strict";n.r(t),n.d(t,"Comment",(function(){return z})),n.d(t,"IssueComment",(function(){return U}));var a=n("QILm"),i=n.n(a),s=n("q1tI"),o=n.n(s);var r=n("pVnL"),c=n.n(r),d=n("3tO9"),l=n.n(d),m=n("DTaC");const u=e=>{const[t,a,i]=Object(n("tgy1").a)(e.defaultIsVisible);return e.children({isVisible:t,show:a,hide:i})};u.defaultProps={defaultIsVisible:!1};var p=u;const h=({children:e,fallback:t,packageName:a})=>o.a.createElement(n("qAQD").a,{id:"issue-comment-reactions",packageName:a,render:()=>t},o.a.createElement(n("n+vo").a,{fallback:t},e));h.displayName="IssueCommentReactionsBoundary";var g=n("vOnD"),b=g.default.div.withConfig({componentId:"rlnj4i-0"
})`line-height:${3*n("1T3M").f}px;pre{overflow:auto;}a{color:${`var(--ds-link, ${n("5kDX").a.B400})`};}a:hover{color:${`var(--ds-link, ${n("5kDX").a.B300})`};}:first-child{margin-top:0;}:last-child{margin-bottom:0;}overflow:hidden;`;class f extends s.PureComponent{constructor(...e){super(...e),this.onContentClick=e=>{Object(n("G67c").a)(e.target,e.currentTarget)&&e.stopPropagation()}}render(){return o.a.createElement(b,null,o.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.html},onClick:this.onContentClick,role:"presentation"}))}}f.displayName="HtmlView",f.defaultProps={html:""};const v=({bodyHtml:e})=>o.a.createElement(n("XeTR").a,null,o.a.createElement(f,{html:e}));v.displayName="PreviewCommentContent";var E=Object(n("V3i/").a)()(v);const y=({bodyHtml:e})=>o.a.createElement(E,{bodyHtml:e});y.displayName="IssueCommentEditorReadonly";var C=Object(n("D6b/").defineMessages)({editedBy:{id:"issue-comment-base.comment.edited-by",defaultMessage:"{timestamp} by {author}",
description:"Text for showing when an activity item was edited by a user"},anonymous:{id:"issue-comment-base.comment.anonymous",defaultMessage:"Anonymous",description:"Text to show for an anonymous user"},edit:{id:"issue-comment-base.comment.edit",defaultMessage:"Edit",description:""},hide:{id:"issue-comment-base.comment.hide",defaultMessage:"Hide",description:"Text to show hide comment"},unhide:{id:"issue-comment-base.comment.unhide",defaultMessage:"Unhide",description:"Text to show unhide comment"},delete:{id:"issue-comment-base.comment.delete",defaultMessage:"Delete",description:""},edited:{id:"issue-comment-base.comment.edited",defaultMessage:"Edited",description:""},retrySave:{id:"issue-comment-base.comment.retry-save",defaultMessage:"Retry",description:""},cancelSave:{id:"issue-comment-base.comment.cancel-save",defaultMessage:"Cancel",description:""},saving:{id:"issue-comment-base.comment.saving",defaultMessage:"Saving...",description:""},confirmationHeader:{
id:"issue-comment-base.comment.confirmation-header",defaultMessage:"Delete this comment?",description:""},confirmationContent:{id:"issue-comment-base.comment.confirmation-content",defaultMessage:"Once you delete, it's gone for good.",description:""},cancelDelete:{id:"issue-comment-base.comment.cancel-delete",defaultMessage:"Cancel",description:"Text displayed on cancel button on delete comment confirmation modal"},confirmationActionText:{id:"issue-comment-base.comment.confirmation-action-text",defaultMessage:"Delete",description:""},internalNote:{id:"issue-comment-base.comment.internal-note",defaultMessage:"Internal note",description:"This text will be displayed next to lock icon if that comment is internal"},copy:{id:"issue-comment-base.comment.copy",defaultMessage:"Copy link to comment",description:"Tooltip shown on hover"},lozenge:{id:"issue-comment-base.comment.lozenge",defaultMessage:"Comments",description:"This text will be displayed inside the comment lozenge"},
addedCommentDescription:{id:"issue-comment-base.comment.added-comment-description",defaultMessage:"added a <span>Comment</span>",description:"Should read as part of a sentence: {author name} added a Comment {date and time}"},notRequestParticipant:{id:"issue-comment-base.comment.not-request-participant",defaultMessage:"(not a request participant)",description:"This text will get concatenated with author name if user is not a request participant"}});const j=["as","style"],k=["as","style"],O=["as","style"],A=["isEditing","highlightColor"],x=["as","style"],I=["as","style"],S=["as","style"],w=["as","style"];n("3gNG"),n("3gNG"),n("3gNG"),n("3gNG"),n("3gNG"),n("3gNG"),n("3gNG"),n("3gNG"),n("3gNG"),n("3gNG"),n("3gNG"),n("3gNG"),n("3gNG"),n("3gNG"),n("3gNG"),n("3gNG"),n("3gNG"),n("3gNG"),n("3gNG"),n("3gNG"),n("3gNG"),n("3gNG"),n("3gNG"),n("3gNG"),n("3gNG"),n("3gNG"),n("3gNG"),n("3gNG");const N=Object(s.forwardRef)(((e,t)=>{let{as:a="span",style:o}=e,r=i()(e,j)
;return s.createElement(a,c()({},r,{style:o,ref:t,className:Object(n("TCwg").a)(["_1ii7kb7n _18u01y44 _o5721q9c",r.className])}))}));N.displayName="GridContainer";const T=Object(s.forwardRef)(((e,t)=>{let{as:a="span",style:o}=e,r=i()(e,k);return s.createElement(a,c()({},r,{style:o,ref:t,className:Object(n("TCwg").a)(["_1e0c11p5",r.className])}))}));T.displayName="GridContentContainer";const F={always:g.css`color:${`var(--ds-text-subtlest, ${n("5kDX").a.N500})`};`,whenDisplaySettingSwitchable:g.css`:hover{color:inherit;}`},M={inner:{paddingTop:n("1T3M").f,paddingBottom:n("1T3M").f/2,paddingLeft:n("1T3M").f},outer:{paddingTop:28}},D=Object(s.forwardRef)(((e,t)=>{let{as:a="div",style:o}=e,r=i()(e,O);const{isEditing:d,highlightColor:m}=r,u=i()(r,A);return s.createElement(a,c()({},u,{style:l()(l()({},o),{},{"--_2qt5jg":Object(n("81+3").a)(M.inner.paddingTop,"px"),"--_emljlh":Object(n("81+3").a)(M.inner.paddingBottom,"px"),"--_3qzxv8":Object(n("81+3").a)(M.inner.paddingLeft,"px"),
"--_z9tio7":Object(n("81+3").a)(M.outer.paddingTop-M.inner.paddingTop,"px"),"--_emljlh-":Object(n("81+3").a)(M.inner.paddingBottom,"px","-"),"--_3qzxv8-":Object(n("81+3").a)(M.inner.paddingLeft,"px","-"),"--_57lgh5":Object(n("81+3").a)(r.highlightColor)}),ref:t,className:Object(n("TCwg").a)(["_2rko1y44 _ca0q148y _u5f3idpf _n3tdixia _19bvv8fk _19pkrad7 _2hwxidpf _otyr19y4 _18u019q6",!r.isEditing&&"_bfhk3c9o",r.className])}))}));const V=Object(s.forwardRef)(((e,t)=>{let{as:a="div",style:o}=e,r=i()(e,x);return s.createElement(a,c()({},r,{style:o,ref:t,className:Object(n("TCwg").a)(["_4t3igktf _otyr1y44",r.className])}))}));const P=Object(s.forwardRef)(((e,t)=>{let{as:a="div",style:o}=e,r=i()(e,I);return s.createElement(a,c()({},r,{style:o,ref:t,className:Object(n("TCwg").a)(["_19pkftgi _kth9idpf _19ysidpf _1trxidpf _1djhidpf _18pzidpf _982hidpf _10nsidpf _1lhcidpf",r.className])}))}));const _=Object(s.forwardRef)(((e,t)=>{let{as:a="div",style:o}=e,r=i()(e,S)
;return s.createElement(a,c()({},r,{style:o,ref:t,className:Object(n("TCwg").a)(["_1e0c116y _18u01crf",r.className])}))}));const q=Object(s.forwardRef)(((e,t)=>{let{as:a="div",style:o}=e,r=i()(e,w);return s.createElement(a,c()({},r,{style:o,ref:t,className:Object(n("TCwg").a)(["_1e0c1o8l _18u0myb0 _2hwxftgi _18t3bfng",r.className])}))}));const G=Object(m.j)((()=>n.e("async-comment-reactions").then(n.bind(null,"I7Nw"))),{moduleId:"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-reactions/index.tsx"}),R=(Object(m.j)((()=>Promise.all([n.e("vendor~d0ae3f07"),n.e("vendor~31ecd969"),n.e("vendor~1f20a385"),n.e("async-editor-view")]).then(n.bind(null,"ZFf7"))),{moduleId:"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/content/index.tsx"}),P);class H extends s.Component{constructor(e){super(e),this.changeEventOccurredAt=e=>{this.setState({selectedEventOccurredAt:e})},this.onDeleteConfirm=()=>{
const{createAnalyticsEvent:e,getOnDeleteConfirm:t,jsdIncidentActivityViewHidden:a,eventOccurredAt:i}=this.props,s=e({action:"deleted"});return Object(n("QIUw").b)()&&s.update({commentDeleteWithJsdIncidentActivityViewHidden:Boolean(a),commentDeleteWithEventOccurredAt:Boolean(i)}),t(s)},this.onEditClick=(e,t)=>{const{getOnEditClick:a,isInternal:i,hasDraft:s}=this.props;a(i),Object(n("SALc").b)(t,"editCommentEditor expanded",{hasDraft:s})},this.onEditSave=e=>{if(!Object(n("bmwK").f)(e)){const{author:t,commentId:a,createdDate:i,bodyHtml:s,shouldShowCommentVisibility:o,visibility:r,visibilityEdited:c,getOnEditSave:d,createAnalyticsEvent:m,jsdIncidentActivityViewHidden:u,fullIssueUrl:p,isIssueOfIncidentsPractice:h,isEditingInternal:g}=this.props,b=t?t.id:null,f=m({action:"updated"});this.state.selectedEventOccurredAt?f.update({commentEditWithEventOccurredAt:!0}):f.update({commentEditWithEventOccurredAt:!1}),o&&f.update({isVisibilityUpdated:!Object(n("6qXQ").a)(r,c)}),d(l()({authorId:b,
createdDate:i,bodyAdf:e,bodyHtml:s,isNewComment:a.includes(n("VQlT").a),visibility:c},Object(n("QIUw").b)()&&h&&g?{eventOccurredAt:this.state.selectedEventOccurredAt,jsdIncidentActivityViewHidden:u,fullIssueUrl:p,triggerIncidentSaveCommentFlag:h}:{}),f)}},this.onHideSave=()=>{const{author:e,commentId:t,createdDate:a,bodyHtml:i,bodyAdf:s,jsdIncidentActivityViewHidden:o,visibilityEdited:r,getOnEditSave:c,createAnalyticsEvent:d,eventOccurredAt:l}=this.props,m=e?e.id:null,u=d({action:"updated"});Object(n("SALc").h)(d({}),o?"unhide clicked":"hide clicked"),c({authorId:m,createdDate:a,bodyAdf:s,bodyHtml:i,isNewComment:t.includes(n("VQlT").a),visibility:r,eventOccurredAt:l,jsdIncidentActivityViewHidden:!o},u)},this.getAuthorDisplayName=e=>e?e.displayName:this.props.intl.formatMessage(C.anonymous),this.getCommentReactions=()=>o.a.createElement(V,{"data-testid":"issue-comment-base.ui.comment.reactions-container"},o.a.createElement(h,{packageName:"issue",
fallback:o.a.createElement(o.a.Fragment,null)},o.a.createElement(G,null))),this.getCommentActions=()=>[this.props.canEdit&&o.a.createElement(n("p/FT").a,{key:"edit",onClick:this.onEditClick},this.props.intl.formatMessage(C.edit),this.props.hasDraft?` (${this.props.intl.formatMessage(n("X2Pz").a.draftIndicator)})`:""),this.props.canDelete&&o.a.createElement(n("p/FT").a,{key:"delete",onClick:this.props.onDeleteClick},this.props.intl.formatMessage(C.delete)),Object(n("QIUw").b)()&&this.props.canEdit&&this.props.isInternal&&this.props.isIssueOfIncidentsPractice&&o.a.createElement(n("p/FT").a,{key:"hide",onClick:this.onHideSave},this.props.intl.formatMessage(this.props.jsdIncidentActivityViewHidden?C.unhide:C.hide)),this.props.showReactions&&this.getCommentReactions()].filter((e=>!!e)),this.getCommentSaveFailedActions=()=>[o.a.createElement(n("p/FT").a,{key:"retry",onClick:this.props.onSaveRetry},this.props.intl.formatMessage(C.retrySave)),o.a.createElement(n("p/FT").a,{key:"edit",
onClick:this.props.onSaveEdit},this.props.intl.formatMessage(C.edit)),o.a.createElement(n("p/FT").a,{key:"cancel",onClick:this.props.onSaveCancel},this.props.intl.formatMessage(C.cancelSave))].filter((e=>!!e)),this.renderAdfRendererFallback=()=>o.a.createElement(y,{bodyHtml:this.props.bodyHtml}),this.getCommentContent=()=>{const{bodyAdf:e,commentId:t,isEditing:a,onEditCancel:i,onEditUpdate:s,onEditPaste:r,onBlur:d,visibilityEdited:l,onCommentVisibilityChange:m,shouldShowCommentVisibility:u,eventOccurredAt:p,isEditingInternal:h}=this.props,g=Object(n("QIUw").b)()&&h?[o.a.createElement(n("wsh1").a,{key:"eventOccurredAtSelector",initialValue:p,onChange:e=>{this.changeEventOccurredAt(e)}})]:[],b={commentId:t,isEditing:a,secondaryToolbarComponents:u?[o.a.createElement(n("PxJM").a,{key:"commentVisibilitySelector",initialValue:l,onChange:m}),...g]:g,onCancel:i,onChange:s,onSave:this.onEditSave,onPaste:r,onBlur:d,onHideSave:this.onHideSave};return o.a.createElement(n("qAQD").a,{
id:"issue-comment-editor",packageName:"issue",render:this.renderAdfRendererFallback},o.a.createElement(n("ZFf7").default,c()({},b,{bodyAdf:e})))},this.getCommentTime=()=>{const{intl:{formatMessage:e,formatHTMLMessage:t},createdDate:a,showExtraContextElements:i}=this.props;return o.a.createElement(o.a.Fragment,null,void 0!==i&&i&&o.a.createElement(q,{"data-testid":"issue-comment-base.ui.comment.action",dangerouslySetInnerHTML:{__html:t(C.addedCommentDescription)}}),o.a.createElement(n("6+Ve").a,{value:a,tooltipPosition:"top",extraStyles:F}),void 0!==i&&i&&o.a.createElement(_,null,o.a.createElement(n("EFQh").a,null,e(C.lozenge))))},this.getCommentEditedToolTip=()=>{const{intl:e}=this.props,t=o.a.createElement(n("GKBH").a,c()({},C.editedBy,{values:{author:this.getAuthorDisplayName(this.props.updateAuthor),timestamp:o.a.createElement(n("6+Ve").a,{value:this.props.updatedDate||""})}}));return o.a.createElement(n("Yto1").a,{content:t,position:"top",
testId:"issue-comment-base.ui.comment.ak-tool-tip"},o.a.createElement(n("AZNf").a,null,e.formatMessage(C.edited)))},this.getFormattedGridContainer=(e,t)=>o.a.createElement(T,{"data-testid":"issue-comment-base.ui.comment.grid-content-container"},o.a.createElement(N,null,e),null!=t?o.a.createElement(N,null,t):null),this.getPermalinkIcon=e=>{const{commentId:t,fullIssueUrl:a,onCopyClick:i,intl:{formatMessage:s}}=this.props;return o.a.createElement(n("Iu9c").a,{id:t,fullIssueUrl:`${a}?focusedCommentId=${t}`,label:s(C.copy),onCopyClick:i,isVisible:e.isVisible})},this.getDeleteConfirmationModal=()=>{const{onDeleteCancel:e,hasDeleteModal:t}=this.props;return o.a.createElement(n("OG3q").a,null,t&&o.a.createElement(o.a.Fragment,null,o.a.createElement(n("jO1c").a,null),o.a.createElement(n("sBEl").a,null,o.a.createElement(n("lkn1").a,{onClose:e,width:"small",testId:"issue-comment-base.ui.comment.modal-dialog"},o.a.createElement(n("aZ3A").a,null,o.a.createElement(n("g4gm").a,{appearance:"danger"
},this.props.intl.formatMessage(C.confirmationHeader))),o.a.createElement(n("ob5R").a,null,this.props.intl.formatMessage(C.confirmationContent)),o.a.createElement(n("cpJW").a,null,o.a.createElement(n("340+").a,{appearance:"danger",onClick:this.onDeleteConfirm,testId:"issue-comment-base.ui.comment.confirm-button"},this.props.intl.formatMessage(C.confirmationActionText)),o.a.createElement(n("340+").a,{appearance:"subtle",onClick:e,testId:"issue-comment-base.ui.comment.cancel-button"},this.props.intl.formatMessage(C.cancelDelete)))))))},this.renderEditedOld=()=>this.props.edited?this.getCommentEditedToolTip():null,this.getEditingAndRestrictedTo=(e,t)=>{const{isEditing:n,hasSaveFailed:a,isOptimistic:i}=this.props,s=this.getPermalinkIcon(t),o=e.length>0;if(i&&!a)return{restrictedTo:null,edited:null};const r=o?this.getFormattedGridContainer(e,s):null,c=o?null:s,d=this.getCommentEditedToolTip();return n?{restrictedTo:null,edited:this.props.edited?d:null}:this.props.edited?{restrictedTo:r,
edited:this.getFormattedGridContainer(d,c)}:{restrictedTo:r,edited:c}},this.optimisticCommentContainerRef=void 0,this.getAuthorAdditionalInfo=()=>!0===Object(n("QIUw").c)()&&(!1===Object(n("QIUw").a)()&&!0===this.props.jsdAuthorCanSeeRequest||!0===Object(n("QIUw").a)()&&!1===this.props.jsdAuthorCanSeeRequest)?this.props.intl.formatMessage(C.notRequestParticipant):"",this.renderComment=e=>{const{author:t,isOptimistic:a,hasSaveFailed:i,isEditing:s,isHighlighted:r,isInternal:c,commentId:d}=this.props;return o.a.createElement(p,null,(l=>{const{restrictedTo:m,edited:u}=a?{}:this.getEditingAndRestrictedTo(e,l),p=o.a.createElement(n("XPTl").a,{avatar:o.a.createElement(n("X9oE").a,{userAccount:t,analyticsData:{trigger:"comment-avatar"},testId:`issue-comment-base.ui.comment.${d}.avatar`},o.a.createElement(n("1JKq").a,{borderColor:"transparent",src:t&&t.avatarUrl||void 0,size:"medium"})),author:o.a.createElement(n("X9oE").a,{userAccount:t,analyticsData:{trigger:"comment-author"}
},o.a.createElement(n("pFNp").a,null,this.getAuthorDisplayName(t),"\xa0",this.getAuthorAdditionalInfo())),time:this.getCommentTime(),edited:a?this.renderEditedOld():u,content:o.a.createElement("div",null,this.getCommentContent(),this.getDeleteConfirmationModal()),restrictedTo:a?e:m,actions:a||s?[]:this.getCommentActions(),isError:i&&!s,errorActions:this.getCommentSaveFailedActions(),isSaving:a&&!i,savingText:this.props.intl.formatMessage(C.saving),highlighted:!c&&!s&&r,testId:`issue-comment-base.ui.comment.ak-comment.${d}`});return a?o.a.createElement("div",{ref:e=>{this.optimisticCommentContainerRef=e}},p):o.a.createElement(R,{onMouseEnter:l.show,onMouseLeave:l.hide,onFocus:l.show,onBlur:l.hide},o.a.createElement("span",{"data-testid":`comment-base-item-${d}`,ref:this.setCommentPermalinkContainer},p))}))},this.renderInternalComment=()=>{
const{visibility:e,intl:t,isEditing:a,isHighlighted:i}=this.props,s=i?`var(--ds-background-accent-yellow-subtler, ${n("5kDX").a.Y75})`:`var(--ds-background-accent-yellow-subtlest, ${n("5kDX").a.Y50})`,r=e.type===n("Rqkq").c?`${t.formatMessage(C.internalNote)}`:`${e.value} \u2022 ${t.formatMessage(C.internalNote)}`;return o.a.createElement(D,{isEditing:a,highlightColor:s},this.renderComment(r))},this.setCommentPermalinkContainer=e=>{this.commentPermalinkContainer=e},this.commentPermalinkContainer=void 0,this.scrollCommentIntoView=()=>{const{hasScrolledPermalink:e,shouldScrollAfterAsyncComponentsLoaded:t,setScrollStatus:a,createAnalyticsEvent:i}=this.props;if(!e&&t){Object(n("OEzP").b)(this.commentPermalinkContainer,{scrollMode:"always",behavior:"smooth"}),a(!0);const e=i({action:"scrolled"});Object(n("SALc").h)(e,"permalink comment",{name:"comment"})}},this.state={selectedEventOccurredAt:e.eventOccurredAt}}componentDidMount(){
const{props:{isOptimistic:e,commentId:t},optimisticCommentContainerRef:a}=this;e&&t.includes(n("VQlT").a)&&a&&Object(n("OEzP").b)(a,{scrollMode:"always",behavior:"smooth"}),this.scrollCommentIntoView()}shouldComponentUpdate(e){if(!this.props.shouldScrollAfterAsyncComponentsLoaded&&e.shouldScrollAfterAsyncComponentsLoaded||!this.props.hasScrolledPermalink&&e.hasScrolledPermalink){const t=l()(l()({},this.props),{},{shouldScrollAfterAsyncComponentsLoaded:e.shouldScrollAfterAsyncComponentsLoaded,hasScrolledPermalink:e.hasScrolledPermalink});if(Object(n("6nfo").a)(t,e))return e.isHighlighted&&!e.hasScrolledPermalink}return!0}componentDidUpdate(){this.scrollCommentIntoView()}render(){const{visibility:e,isInternal:t}=this.props;return t?this.renderInternalComment():this.renderComment(e.value)}}H.displayName="CommentBase",H.displayName="Comment",H.defaultProps={isEditing:!1,isIssueOfIncidentsPractice:!1,visibility:n("Rqkq").a,updatedDate:null,edited:!1,eventOccurredAt:null,
jsdIncidentActivityViewHidden:null};const $=e=>{const t=Object(n("uz7G").a)();return o.a.createElement(H,c()({},e,{isIssueOfIncidentsPractice:t}))};$.displayName="CommentWithIssueOfIncidentsPractice";const L=Object(n("WdOs").a)(n("QIUw").b,$,H),B=["baseUrl","issueAri","commentAri","isReactionsFeatureActive","mediaContext","mentionProvider","contextIdentifier","getEncodedMention","projectType","activityProvider","sharedAtTimestamp","sharedValue","onEditorExpandedFailure","onEditorSaveFailure","onEditorClearSharedValues"],z=e=>{const{baseUrl:t,issueAri:a,commentAri:r,isReactionsFeatureActive:c,mediaContext:d,mentionProvider:l,contextIdentifier:m,getEncodedMention:u,projectType:p,activityProvider:h,sharedAtTimestamp:g,sharedValue:b,onEditorExpandedFailure:f,onEditorSaveFailure:v,onEditorClearSharedValues:E}=e,y=i()(e,B),[,{setContextState:C,setEditorState:j,setReactionsState:k}]=(()=>{const[,e]=Object(n("g2hJ").b)();return[null,Object(s.useMemo)((()=>({setContextState:t=>{
e.setContextState(t)},setEditorState:t=>{e.setEditorState(t)},setReactionsState:t=>{e.setReactionsState(t)}})),[e])]})();Object(s.useEffect)((()=>{C({issueAri:a,commentAri:r,projectType:p})}),[r,a,p,C]),Object(s.useEffect)((()=>{j({contextIdentifier:m,mentionProvider:l,getEncodedMention:u,activityProvider:h,mediaContext:d,sharedAtTimestamp:g,sharedValue:b,onEditorExpandedFailure:f,onEditorSaveFailure:v,onEditorClearSharedValues:E})}),[h,m,u,d,l,E,f,v,j,g,b]),Object(s.useEffect)((()=>{k({isActive:c})}),[c,k]);const[O]=Object(n("g2hJ").d)();return O.contextIdentifier&&O.mediaContext&&O.mentionProvider?o.a.createElement(n("Icg4").b,{id:`issue-comment-${e.commentId}`},o.a.createElement(L,y)):null};z.displayName="Comment";const U=e=>o.a.createElement(n("g2hJ").a,{scope:`comment-${e.commentId}`},o.a.createElement(z,e));U.displayName="IssueComment";t.default=U},"p/FT":function(e,t,n){"use strict";var a=n("q1tI"),i=n.n(a);const s="@atlaskit/comment",o="10.6.1";class r extends a.Component{
render(){const{children:e,onClick:t,onFocus:a,onMouseOver:s,isDisabled:o}=this.props;return i.a.createElement("span",{onClick:t,onFocus:a,onMouseOver:s},i.a.createElement(n("0+Gd").a,{appearance:"subtle-link",spacing:"none",type:"button",isDisabled:o},e))}}r.displayName="ActionItem";const c=Object(n("qgDP").a)("atlaskit");t.a=Object(n("ibeh").a)({componentName:"commentAction",packageName:s,packageVersion:o})(Object(n("VHV8").a)({onClick:c({action:"clicked",actionSubject:"commentAction",attributes:{componentName:"commentAction",packageName:s,packageVersion:o}})})(r))},pFNp:function(e,t,n){"use strict";var a=n("q1tI"),i=n.n(a);const s="@atlaskit/comment",o="10.6.1";class r extends a.Component{render(){const{children:e,href:t,onClick:a,onFocus:s,onMouseOver:o}=this.props;return i.a.createElement(n("vXkq").a,{hasAuthor:!0,href:t,onClick:a,onFocus:s,onMouseOver:o},e)}}r.displayName="Author";const c=Object(n("qgDP").a)("atlaskit");t.a=Object(n("ibeh").a)({componentName:"commentAuthor",
packageName:s,packageVersion:o})(Object(n("VHV8").a)({onClick:c({action:"clicked",actionSubject:"commentAuthor",attributes:{componentName:"commentAuthor",packageName:s,packageVersion:o}})})(r))},tgy1:function(e,t,n){"use strict";var a=n("q1tI");t.a=(e=!1)=>{const[t,n]=Object(a.useState)(e);return[t,()=>{n(!0)},()=>{n(!1)}]}},vXkq:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("q1tI");const i=Object(n("AeFk").css)({fontWeight:"inherit","&:not(:hover):not(:active)":{color:"var(--ds-text-subtle, #42526E)"}}),s={name:"f3vz0n",styles:"font-weight:500"};class o extends a.Component{render(){const{children:e,hasAuthor:t,href:a,onClick:o,onFocus:r,onMouseOver:c}=this.props;return a?Object(n("AeFk").jsx)("a",{href:a,css:[i,t&&s],onClick:o,onFocus:r,onMouseOver:c},e):Object(n("AeFk").jsx)("span",{css:[i,t&&s],onClick:o,onFocus:r,onMouseOver:c},e)}}o.displayName="CommentField"},"wp/Q":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){
return i}));const a=3.5*Object(n("7w+A").gridSize)(),i=2*Object(n("7w+A").gridSize)()}}]);try{window.__jsEvalStop("async-comment-item.js")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-source-maps/assets/async-comment-item.a477fc96817a9d9977ef.8.js.map